(this["webpackJsonpformula-manipulation"]=this["webpackJsonpformula-manipulation"]||[]).push([[0],{230:function(e,t,r){e.exports=r(325)},241:function(e,t,r){},252:function(e,t,r){},253:function(e,t,r){},325:function(e,t,r){"use strict";r.r(t);var n,i=r(76),a=r(77),c=r(1),u=r.n(c),o=r(50),s=r.n(o),l=r(9),p=r(15),h=r(13),f=r(10),d=r(14),v=r(35),y=(r(241),r(330)),m=r(331),b=r(332),O=r(329);function w(e,t){return{ruleNames:t,tree:e,type:n.UpdateTree}}function j(e){return{history:e,type:n.SetHistory}}function x(){return{type:n.SaveHistory}}!function(e){e.UpdateTree="Tree/UpdateTree",e.AddToHistory="Tree/AddToHistory",e.Undo="Tree/Undo",e.Redo="Tree/Redo",e.ClearHistory="Tree/ClearHistory",e.LoadHistory="Tree/LoadHistory",e.SetHistory="Tree/SetHistory",e.SaveHistory="Tree/SaveHistory"}(n||(n={}));var g,E=function(e){return e.tree.index>0},R=function(e){return e.tree.index<e.tree.history.length-1},N=function(e){return e.tree.index>=0?e.tree.history[e.tree.index]:void 0},k=r(94),_=r(66),I=r(327),A=r(328),S=r(335),T=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,r=e.id,n=e.icon,i=e.onClickButton,a=Object(k.a)(e,["name","id","icon","onClickButton"]);return c.createElement(I.a,null,c.createElement(A.a,Object.assign({},a,{id:r||"".concat(t.replace(" ",""),"Button"),onClick:i}),c.createElement(_.a,{icon:n}),c.createElement(S.a,{target:r||"".concat(t.replace(" ",""),"Button")},t)))}}]),t}(c.Component),C=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return c.createElement(O.a,{inline:!0,onSubmit:function(e){return e.preventDefault()}},c.createElement(T,{id:"Undo",name:"Undo last action",icon:"undo",color:"primary",className:"mr-sm-2",disabled:!this.props.canUndo,onClickButton:this.props.undo}),c.createElement(T,{id:"Redo",name:"Redo",icon:"redo",color:"primary",className:"mr-sm-2",disabled:!this.props.canRedo,onClickButton:this.props.redo}))}}]),t}(c.Component),L=Object(v.b)((function(e){return{canRedo:R(e),canUndo:E(e)}}),(function(e){return{redo:function(){return e({type:n.Redo})},undo:function(){return e({type:n.Undo})}}}))(C),H=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return c.createElement(y.a,{color:"light",light:!0},c.createElement(m.a,{href:"/"},"Formula Handling - Group 8"),c.createElement(b.a,{navbar:!0},c.createElement(L,null)))}}]),t}(c.Component),U=r(334),P=r(127),D=r.n(P),M=r(333);function B(e){return{line:e,type:g.AddToLog}}function V(){return{type:g.ClearHistory}}function F(e){return{history:e,type:g.SetHistory}}function G(){return{type:g.SaveHistory}}!function(e){e.AddToLog="Console/Log",e.ExecuteInput="Console/ExecuteInput",e.AddToInputHistory="Console/AddToInputHistory",e.ClearHistory="Console/ClearHistory",e.LoadHistory="Console/LoadHistory",e.SetHistory="Console/SetHistory",e.SaveHistory="Console/SaveHistory"}(g||(g={}));var W,z=function(e){return e.console.lines},Q=function(e){return e.console.inputHistory},Y=function(e){return e.console.lines.length>0},J=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,e))).cycle=function(e){if("ArrowUp"===e.key)if(-1===r.state.cycleIndex){var t=r.props.inputHistory.length-1;t>-1&&r.setState({cycleIndex:t,input:r.props.inputHistory[t],tempInput:r.state.input})}else if(0===r.state.cycleIndex){r.props.inputHistory.length;r.setState({cycleIndex:-1,input:r.state.tempInput||""})}else{var n=r.state.cycleIndex-1;r.setState({cycleIndex:n,input:r.props.inputHistory[n]})}else if("ArrowDown"===e.key)if(-1===r.state.cycleIndex){r.props.inputHistory.length>0&&r.setState({cycleIndex:0,input:r.props.inputHistory[0],tempInput:r.state.input})}else if(r.state.cycleIndex===r.props.inputHistory.length-1)r.setState({cycleIndex:-1,input:r.state.tempInput||""});else{var i=r.state.cycleIndex+1;r.setState({cycleIndex:i,input:r.props.inputHistory[i]})}},r.execute=function(){r.props.executeInput(r.state.input),r.setState({input:""})},r.handleInputChange=function(e){r.setState({cycleIndex:-1,input:e.target.value,tempInput:void 0})},r.state={cycleIndex:-1,input:""},r}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return c.createElement(O.a,{inline:!0,onSubmit:function(t){t.preventDefault(),e.execute()}},c.createElement(M.a,{value:this.state.input,onChange:this.handleInputChange,onKeyDown:this.cycle}),c.createElement(A.a,{onClick:this.execute},c.createElement(_.a,{icon:"arrow-right"})))}},{key:"componentDidUpdate",value:function(){var e=D()(".LogView");e.scrollTop(e.prop("scrollHeight"))}},{key:"componentDidMount",value:function(){var e=D()(".LogView");e.scrollTop(e.prop("scrollHeight"))}}]),t}(c.Component),K=Object(v.b)((function(e){return{inputHistory:Q(e)}}),(function(e){return{executeInput:function(t){return e(function(e){return{input:e,type:g.ExecuteInput}}(t))}}}))(J),q=(r(252),function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,r=e.id,n=e.icon,i=e.onClickButton,a=Object(k.a)(e,["name","id","icon","onClickButton"]);return c.createElement(A.a,Object.assign({size:"sm"},a,{id:r||"".concat(t.replace(" ",""),"Button"),onClick:i}),c.createElement(_.a,{icon:n}),c.createElement(S.a,{target:r||"".concat(t.replace(" ",""),"Button")},t))}}]),t}(c.Component)),$=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return c.createElement(q,{id:"Clear",name:"Clear",icon:"trash-alt",color:"danger",disabled:!this.props.canClear,onClickButton:this.props.clear})}}]),t}(c.Component),X=Object(v.b)((function(e){return{canClear:Y(e)}}),(function(e){return{clear:function(){return e(V())}}}))($),Z=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return c.createElement("div",{className:"LogView"},this.props.lines.map((function(e,t){return e.isInput?c.createElement("p",{key:t},c.createElement("code",{className:"input"},"> "+e.line)):e.isError?c.createElement("p",{key:t},c.createElement("code",{className:"error"},e.line)):c.createElement("p",{key:t},c.createElement("code",{className:"output"},e.line))})))}}]),t}(c.Component),ee=Object(v.b)((function(e){return{lines:z(e)}}))(Z),te=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return c.createElement(c.Fragment,null,c.createElement("div",{className:"HeaderWrapper"},c.createElement(U.a,{className:"ConsoleHeader"},c.createElement("p",{className:"h6"},"Console"),c.createElement(X,null))),c.createElement(U.a,{className:"ConsoleView"},c.createElement(ee,null),c.createElement(K,null)))}}]),t}(c.Component),re=r(97),ne=r(93);!function(e){e.null="null",e.expression="expression",e.number="number",e.variable="variable",e.symbol="symbol",e.summation="summation",e.product="product",e.power="power"}(W||(W={}));var ie=function e(t){Object(l.a)(this,e),this.name=void 0,this.hash=void 0,this.name=t,this.hash=void 0};function ae(e){if(!e)return"null";switch(e.type){case W.null:return"";case W.variable:return e.variable;case W.number:return e.value.toString();case W.expression:return e.children?"?("+e.children.map((function(e){return ae(e)})).join(" ")+")":e.name;case W.symbol:return e.symbol;case W.power:return e.children?ce(e.children[0])?ce(e.children[1])?ae(e.children[0])+"^"+ae(e.children[1]):ae(e.children[0])+"^("+ae(e.children[1])+")":ce(e.children[1])?"("+ae(e.children[0])+")^"+ae(e.children[1]):"("+ae(e.children[0])+")^("+ae(e.children[1])+")":e.name;case W.summation:return e.children?e.children.map((function(e){return e.type===W.number&&e.value<0?"("+ae(e)+")":ae(e)})).join(" + "):e.name;case W.product:return e.children?e.children.map((function(e){return e.type===W.summation?"("+ae(e)+")":ae(e)})).join("*"):e.name;default:return""}}function ce(e){return e.type===W.variable||e.type===W.symbol||e.type===W.number&&e.value>=0}r(253);var ue=function(e){function t(){var e,r;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(r=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(i)))).svg=void 0,r.width=1100,r.tree=function(e){var t=Object(ne.b)(e);return t.data.dx=30,t.data.dy=r.width/(t.height+1),re.c().nodeSize([t.data.dx,t.data.dy])(t)},r.chart=function(e){var t=r.tree(e),n=1/0,i=-n;t.each((function(e){e.x>i&&(i=e.x),e.x<n&&(n=e.x)})),r.svg.attr("viewBox",[0,0,r.width,i-n+2*t.data.dx]);var a=r.svg.append("g").attr("font-family","sans-serif").attr("font-size",20).attr("transform","translate(".concat(t.data.dy/3,",").concat(t.data.dx-n,")")),c=(a.append("g").attr("fill","none").attr("stroke","#555").attr("stroke-opacity",.4).attr("stroke-width",1.5).selectAll("path").data(t.links()).join("path").attr("d",re.a().x((function(e){return e.y})).y((function(e){return e.x}))),a.append("g").attr("stroke-linejoin","round").attr("stroke-width",1).selectAll("g").data(t.descendants()).join("g").attr("transform",(function(e){return"translate(".concat(e.y,",").concat(e.x,")")})));c.append("rect").attr("fill",(function(e){return e.children?"#fff":"#eee"})).attr("stroke","#333").attr("x",-20).attr("y",-15).attr("width",40).attr("height",30),c.append("text").style("font-size","1em").attr("dy","0.31em").text((function(e){return e.data.name})).attr("text-anchor","middle").clone(!0).lower().attr("stroke","white")},r}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return c.createElement(c.Fragment,null,c.createElement(U.a,{fluid:!0,className:"TreeView"},c.createElement("svg",{ref:function(t){return e.svg=re.b(t)},width:"100%"}),this.props.tree?c.createElement("span",{className:"StringView"},ae(this.props.tree.tree[0])):null))}},{key:"componentDidUpdate",value:function(){this.props.tree?(this.svg.select("g").remove(),this.chart(this.props.tree.tree[0])):this.svg.select("g").remove()}},{key:"componentDidMount",value:function(){this.props.tree?(this.svg.select("g").remove(),this.chart(this.props.tree.tree[0])):this.svg.select("g").remove()}}]),t}(c.Component),oe=Object(v.b)((function(e){return{tree:N(e)}}))(ue),se=r(17),le=r.n(se),pe=r(38),he=r(43),fe=(r(255),r(172)),de=r(18),ve=r(67);function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(r,!0).forEach((function(t){Object(ve.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var be={inputHistory:[],lines:[]};function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(r,!0).forEach((function(t){Object(ve.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var je={history:[],index:-1};function xe(e){localStorage.setItem("consoleCache",JSON.stringify(e))}function ge(){var e=localStorage.getItem("consoleCache");return e?JSON.parse(e):{lines:[],inputHistory:[]}}var Ee=r(16),Re=r.n(Ee);function Ne(e){return e.type!==W.summation&&e.type!==W.product||(e.children=e.children.map((function(e){return Ne(e)})),e.children=Re.a.flatten(e.children.map((function(t){return t.type===e.type?t.children:[t]})))),e}var ke=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,W.product))).type=W.product,r.children=void 0,r.children=e,r.name="*",r}return Object(d.a)(t,e),t}(ie),_e=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,W.summation))).type=W.summation,r.children=void 0,r.children=e,r.name="+",r}return Object(d.a)(t,e),t}(ie);function Ie(e){switch(e.type!==W.summation&&e.type!==W.product&&e.type!==W.power||(e.children=e.children.map((function(e){return Ie(e)}))),e.type){case W.product:return function(e){for(var t=e.children,r=function(e){if(t[e].type===W.summation){if(0===e){var r=t[e].children.map((function(r){return new ke([r,t[e+1]])}));return{v:new _e(r)}}var n=t[e].children.map((function(r){return new ke([r,t[e-1]])}));return{v:new _e(n)}}},n=0;n<t.length;n++){var i=r(n);if("object"===typeof i)return i.v}return e}(e);default:return e}}var Ae=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,W.variable))).value=void 0,r.type=W.number,r.value=e,r.name=e.toString(),r}return Object(d.a)(t,e),t}(ie);function Se(e){return e.type!==W.summation&&e.type!==W.product&&e.type!==W.power||(e.children=e.children.map((function(e){return Se(e)}))),e.type===W.summation?function(e){if(e.children=Re.a.compact(e.children.map((function(e){return e.type===W.number&&0===e.value?void 0:e}))),0===e.children.length)return new Ae(0);if(1===e.children.length)return e.children[0];return e}(e):e.type===W.product?function(e){e.children=Re.a.compact(e.children.map((function(e){return e.type===W.number&&1===e.value?void 0:e})));for(var t=e.children,r=0;r<t.length;r++)if(t[r].type===W.number&&0===t[r].value)return new Ae(0);if(0===e.children.length)return new Ae(1);if(1===e.children.length)return e.children[0];return e}(e):e.type===W.power?function(e){var t=e.children[0],r=e.children[1];if(t.type===W.number&&r.type===W.number){if(0===r.value)return new Ae(1);if(1===r.value)return t;if(1===t.value||0===t.value)return t}return e}(e):e}var Te=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,W.power))).type=W.power,r.children=void 0,r.children=e,r.name="^",r}return Object(d.a)(t,e),t}(ie);function Ce(e){return e.type!==W.summation&&e.type!==W.product&&e.type!==W.power||(e.children=e.children.map((function(e){return Ce(e)}))),e.type===W.product?function(e){for(var t=e.children,r=function(r){if(t[r-1].type===W.variable&&t[r].type===W.variable&&t[r-1].variable===t[r].variable){var n=Re.a.compact(e.children.map((function(e,t){return t===r-1?new Te([e,new Ae(2)]):t===r?void 0:e})));return{v:new ke(n)}}if(t[r-1].type===W.variable&&t[r].type===W.power&&t[r-1].variable===t[r].children[0].variable){var i=Re.a.compact(e.children.map((function(e,n){return n===r-1?new Te([e,new _e([new Ae(1),t[r].children[1]])]):n===r?void 0:e})));return{v:new ke(i)}}if(t[r].type===W.variable&&t[r-1].type===W.power&&t[r].variable===t[r-1].children[0].variable){var a=Re.a.compact(e.children.map((function(e,n){return n===r?new Te([e,new _e([new Ae(1),t[r-1].children[1]])]):n===r-1?void 0:e})));return{v:new ke(a)}}},n=1;n<t.length;n++){var i=r(n);if("object"===typeof i)return i.v}return e}(e):e.type===W.summation?function(e){for(var t=e.children,r=function(r){if(t[r-1].type===W.variable&&t[r].type===W.variable&&t[r-1].variable===t[r].variable){var n=Re.a.compact(e.children.map((function(e,t){return t===r-1?new ke([e,new Ae(2)]):t===r?void 0:e})));return{v:new _e(n)}}if(t[r-1].type===W.variable&&t[r].type===W.product&&t[r-1].variable===t[r].children[0].variable){var i=Re.a.compact(e.children.map((function(e,n){return n===r-1?new ke([e,new _e([new Ae(1),t[r].children[1]])]):n===r?void 0:e})));return{v:new _e(i)}}if(t[r].type===W.variable&&t[r-1].type===W.product&&t[r].variable===t[r-1].children[0].variable){var a=Re.a.compact(e.children.map((function(e,n){return n===r?new ke([e,new _e([new Ae(1),t[r-1].children[1]])]):n===r-1?void 0:e})));return{v:new _e(a)}}},n=1;n<t.length;n++){var i=r(n);if("object"===typeof i)return i.v}return e}(e):e}function Le(e){return e.type!==W.summation&&e.type!==W.product&&e.type!==W.power||(e.children=e.children.map((function(e){return Le(e)}))),e.type===W.summation?He(e):e.type===W.product?Ue(e):e.type===W.power?Pe(e):e}function He(e){var t=0,r=!0,n=!1,i=void 0;try{for(var a,c=e.children[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var u=a.value;u.type===W.number&&(t+=u.value)}}catch(o){n=!0,i=o}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}return e.children=Re.a.compact(e.children.map((function(e){return e.type!==W.number?e:void 0}))),0===e.children.length?new Ae(t):(0!==t&&e.children.push(new Ae(t)),e)}function Ue(e){var t=1,r=!0,n=!1,i=void 0;try{for(var a,c=e.children[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var u=a.value;u.type===W.number&&(t*=u.value)}}catch(o){n=!0,i=o}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}return e.children=Re.a.compact(e.children.map((function(e){return e.type!==W.number?e:void 0}))),0===e.children.length?new Ae(t):(1!==t&&e.children.unshift(new Ae(t)),e)}function Pe(e){return e.children[0].type===W.number&&e.children[1].type===W.number?new Ae(Math.pow(e.children[0].value,e.children[1].value)):e}function De(e){return e.type!==W.summation&&e.type!==W.product&&e.type!==W.power||(e.children=e.children.map((function(e){return De(e)})),e.children=e.children.sort((function(e,t){return Me(e,t)}))),e.hash=void 0,e.hash=function e(t){if(t){if(t.hash)return t.hash;switch(t.type){case W.null:return"";case W.variable:return t.variable;case W.number:return t.value.toString();case W.expression:return t.children?"?("+t.children.map((function(t){return e(t)})).join(" ")+")":t.name;case W.symbol:return t.symbol;case W.power:return t.children?"("+e(t.children[0])+"^"+e(t.children[1])+")":t.name;case W.summation:return t.children?"("+t.children.map((function(t){return e(t)})).join(" + ")+")":t.name;case W.product:return t.children?"("+t.children.map((function(t){return e(t)})).join(" * ")+")":t.name;default:return""}}}(e),e}function Me(e,t){return e.type===W.number&&t.type===W.number?function(e,t){return e.value>t.value?-1:e.value<t.value?1:0}(e,t):e.type===W.variable&&t.type===W.variable?function(e,t){return e.variable.localeCompare(t.variable)}(e,t):e.type===W.number?1:t.type===W.number?-1:e.type===W.variable?1:t.type===W.variable?-1:function(e,t){if(e.type===W.summation&&t.type===W.summation||e.type===W.product&&t.type===W.product)return function(e,t){return Me(e.children[0],t.children[0])}(e,t);if(e.type===W.power&&t.type===W.power)return function(e,t){var r=Me(e.children[0],t.children[0]);return 0===r?Me(e.children[1],t.children[1]):r}(e,t);if(e.type===W.summation)return 1;if(t.type===W.summation)return-1;if(e.type===W.product)return 1;if(t.type===W.product)return-1;throw new Error("Fault in sorting algorithm")}(e,t)}function Be(e){return e.type===W.power?(e.children=e.children.map((function(e){return Be(e)})),function(e){var t=e.children;if(t[0].type===W.power){var r=t[0];t[0]=r.children[0],t[1]=new ke([r.children[1],t[1]])}if(t[0].type===W.product)return new ke([new Te([t[0].children[0],t[1]]),new Te([t[0].children[1],t[1]])]);return e}(e)):e.type===W.product?(e.children=e.children.map((function(e){return Be(e)})),function(e){for(var t=e.children,r=function(r){if(t[r-1].type===W.power&&t[r].type===W.power){var n=t[r-1].children,i=t[r].children;if(n[0].type===W.number&&i[0].type===W.number&&n[0].value===i[0].value)return 2===t.length?{v:new Te([n[0],new _e([n[1],i[1]])])}:(e.children=Re.a.compact(e.children.map((function(e,t){return t===r?new Te([n[0],new _e([n[1],i[1]])]):t===r-1?void 0:e}))),{v:e});if(n[0].type===W.variable&&i[0].type===W.variable&&n[0].variable===i[0].variable)return 2===t.length?{v:new Te([n[0],new _e([n[1],i[1]])])}:(e.children=Re.a.compact(e.children.map((function(e,t){return t===r?new Te([n[0],new _e([n[1],i[1]])]):t===r-1?void 0:e}))),{v:e})}},n=1;n<t.length;n++){var i=r(n);if("object"===typeof i)return i.v}return e}(e)):(e.type===W.summation&&(e.children=e.children.map((function(e){return Be(e)}))),e)}var Ve=r(173);function Fe(e,t){if(void 0!==e.hash&&void 0!==t.hash)return e.hash===t.hash}function Ge(e,t){var r=new Map,n=!0,i=!1,a=void 0;try{for(var c,u=e[Symbol.iterator]();!(n=(c=u.next()).done);n=!0){var o=c.value,s=!1,l=!0,p=!1,h=void 0;try{for(var f,d=r[Symbol.iterator]();!(l=(f=d.next()).done);l=!0){var v=f.value,y=Object(Ve.a)(v,2),m=y[0],b=y[1];if(t(o,m)){b.push(o),s=!0;break}}}catch(N){p=!0,h=N}finally{try{l||null==d.return||d.return()}finally{if(p)throw h}}s||r.set(o,[o])}}catch(N){i=!0,a=N}finally{try{n||null==u.return||u.return()}finally{if(i)throw a}}var O=[],w=!0,j=!1,x=void 0;try{for(var g,E=r.values()[Symbol.iterator]();!(w=(g=E.next()).done);w=!0){var R=g.value;O.push(R)}}catch(N){j=!0,x=N}finally{try{w||null==E.return||E.return()}finally{if(j)throw x}}return O}function We(e){return e.type===W.power?(e.children=e.children.map((function(e){return We(e)})),function(e){var t=e.children;if(t[0].type===W.power){var r=t[0];t[0]=r.children[0],t[1]=new ke([r.children[1],t[1]])}if(t[0].type===W.product)return new ke([new Te([t[0].children[0],t[1]]),new Te([t[0].children[1],t[1]])]);return e}(e)):e.type===W.product?(e.children=e.children.map((function(e){return We(e)})),function(e){var t=Ge(e.children,(function(e,t){if(e.type===W.power&&t.type===W.power)return Fe(e.children[0],t.children[0])}));return new ke(t.map((function(e){if(1===e.length)return e[0];var t=e[0].children[0],r=e.map((function(e){return e.children[1]}));return new Te([t,new _e(r)])})))}(e)):(e.type===W.summation&&(e.children=e.children.map((function(e){return We(e)}))),e)}function ze(e){switch(e.type){case W.null:return;case W.number:case W.variable:return function(e){return e}(e);case W.symbol:return;case W.expression:return function(e){var t=ze;if(e.children){if(1===e.children.length){var r=e.children[0];if(r.type===W.variable)return ze(r);if(r.type===W.number)return ze(r)}if(2===e.children.length){var n=e.children;return e.children=Re.a.compact([t(new Ae(0)),n[0],t(n[1])]),t(e)}if(3===e.children.length){var i=e.children;if(i[0].type===W.symbol)return ze(i[1]);var a=i[1];if(a.type===W.symbol)switch(a.symbol){case"+":return t(new _e(Re.a.compact([t(i[0]),t(i[2])])));case"-":return t(new _e(Re.a.compact([t(e.children[0]),t(new ke(Re.a.compact([t(new Ae(-1)),t(e.children[2])])))])));case"*":return ze(new ke(Re.a.compact([ze(i[0]),ze(i[2])])));case"/":return t(new ke(Re.a.compact([t(e.children[0]),t(new Te(Re.a.compact([t(e.children[2]),t(new Ae(-1))])))])));case"^":return t(new Te(Re.a.compact([t(e.children[0]),t(e.children[2])])));default:return e}}}e.children&&(e.children=Re.a.compact(e.children.map((function(e){return ze(e)}))));return e}(e);default:return e}}function Qe(e){return(e=De(e)).type!==W.summation&&e.type!==W.product&&e.type!==W.power||(e.children=e.children.map((function(e){return Qe(e)}))),e.type===W.summation?function(e){var t=He(e);if(t.type===W.number)return t;var r=Ge(e.children,(function(e,t){return Fe(e,t)}));return t.children=r.map((function(e){return 1===e.length?e[0]:new ke([new Ae(e.length),e[0]])})),t}(e):e.type===W.product?function(e){var t=Ue(e);if(t.type===W.number)return t;var r=Ge(e.children,(function(e,t){return Fe(e,t)}));return t.children=r.map((function(e){return 1===e.length?e[0]:new Te([e[0],new Ae(e.length)])})),t}(e):e.type===W.power?function(e){return Pe(e)}(e):e}var Ye=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(h.a)(this,Object(f.a)(t).call(this,W.null))).type=W.null,e}return Object(d.a)(t,e),t}(ie);function Je(e){return e.type!==W.summation&&e.type!==W.product&&e.type!==W.power||(e.children=e.children.map((function(e){return Je(e)}))),e.type===W.product?function(e){for(var t=0;t<e.children.length;t++)if(e.children[t].type===W.null)return new Ye;return e}(e):e.type===W.power?function(e){var t=e.children[0],r=e.children[1],n=Le(t),i=Le(r);if(n.type===W.number&&i.type===W.number){if(0===n.value&&i.value<0)return new Ye;if(n.value<0&&1/i.value%2===0)return new Ye}for(var a=0;a<e.children.length;a++)if(e.children[a].type===W.null)return new Ye;return e}(e):e.type===W.summation?function(e){for(var t=0;t<e.children.length;t++)if(e.children[t].type===W.null)return new Ye;return e}(e):e}var Ke,qe=r(128);!function(e){e[e.ERROR=0]="ERROR",e[e.WARNING=1]="WARNING"}(Ke||(Ke={}));var $e=function(){function e(){Object(l.a)(this,e),this.errors=[]}return Object(p.a)(e,[{key:"addError",value:function(e){this.errors.push(e)}},{key:"syntaxError",value:function(e,t,r,n,i,a){t&&t.text&&(")"===t.text?this.errors.push({end:n+t.text.length,level:Ke.ERROR,line:r-1,message:"Expecting arguments before symbol )",start:n}):this.errors.push({end:n+t.text.length,level:Ke.ERROR,line:r-1,message:i,start:n}))}}]),e}(),Xe=r(21),Ze=r(65),et=r(42),tt=r(75),rt=r(40),nt=r(33),it=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,e)))._interp=new tt.LexerATNSimulator(t._ATN,Object(Xe.a)(r)),r}return Object(d.a)(t,e),Object(p.a)(t,[{key:"vocabulary",get:function(){return t.VOCABULARY}}]),Object(p.a)(t,[{key:"grammarFileName",get:function(){return"Expression.g4"}},{key:"ruleNames",get:function(){return t.ruleNames}},{key:"serializedATN",get:function(){return t._serializedATN}},{key:"channelNames",get:function(){return t.channelNames}},{key:"modeNames",get:function(){return t.modeNames}}],[{key:"_ATN",get:function(){return t.__ATN||(t.__ATN=(new Ze.ATNDeserializer).deserialize(nt.toCharArray(t._serializedATN))),t.__ATN}}]),t}(et.Lexer);it.VARIABLE=1,it.SCIENTIFIC_NUMBER=2,it.LPAREN=3,it.RPAREN=4,it.PLUS=5,it.MINUS=6,it.TIMES=7,it.DIV=8,it.GT=9,it.LT=10,it.EQ=11,it.POINT=12,it.POW=13,it.WS=14,it.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"],it.modeNames=["DEFAULT_MODE"],it.ruleNames=["VARIABLE","VALID_ID_START","VALID_ID_CHAR","SCIENTIFIC_NUMBER","NUMBER","UNSIGNED_INTEGER","E","SIGN","LPAREN","RPAREN","PLUS","MINUS","TIMES","DIV","GT","LT","EQ","POINT","POW","WS"],it._LITERAL_NAMES=[void 0,void 0,void 0,"'('","')'","'+'","'-'","'*'","'/'","'>'","'<'","'='","'.'","'^'"],it._SYMBOLIC_NAMES=[void 0,"VARIABLE","SCIENTIFIC_NUMBER","LPAREN","RPAREN","PLUS","MINUS","TIMES","DIV","GT","LT","EQ","POINT","POW","WS"],it.VOCABULARY=new rt.VocabularyImpl(it._LITERAL_NAMES,it._SYMBOLIC_NAMES,[]),it._serializedATN="\x03\uc91d\ucaba\u058d\uafba\u4f53\u0607\uea8b\uc241\x02\x10u\b\x01\x04\x02\t\x02\x04\x03\t\x03\x04\x04\t\x04\x04\x05\t\x05\x04\x06\t\x06\x04\x07\t\x07\x04\b\t\b\x04\t\t\t\x04\n\t\n\x04\v\t\v\x04\f\t\f\x04\r\t\r\x04\x0e\t\x0e\x04\x0f\t\x0f\x04\x10\t\x10\x04\x11\t\x11\x04\x12\t\x12\x04\x13\t\x13\x04\x14\t\x14\x04\x15\t\x15\x03\x02\x03\x02\x07\x02.\n\x02\f\x02\x0e\x021\v\x02\x03\x03\x05\x034\n\x03\x03\x04\x03\x04\x05\x048\n\x04\x03\x05\x03\x05\x03\x05\x05\x05=\n\x05\x03\x05\x03\x05\x05\x05A\n\x05\x03\x06\x06\x06D\n\x06\r\x06\x0e\x06E\x03\x06\x03\x06\x06\x06J\n\x06\r\x06\x0e\x06K\x05\x06N\n\x06\x03\x07\x06\x07Q\n\x07\r\x07\x0e\x07R\x03\b\x03\b\x03\t\x03\t\x03\n\x03\n\x03\v\x03\v\x03\f\x03\f\x03\r\x03\r\x03\x0e\x03\x0e\x03\x0f\x03\x0f\x03\x10\x03\x10\x03\x11\x03\x11\x03\x12\x03\x12\x03\x13\x03\x13\x03\x14\x03\x14\x03\x15\x06\x15p\n\x15\r\x15\x0e\x15q\x03\x15\x03\x15\x02\x02\x02\x16\x03\x02\x03\x05\x02\x02\x07\x02\x02\t\x02\x04\v\x02\x02\r\x02\x02\x0f\x02\x02\x11\x02\x02\x13\x02\x05\x15\x02\x06\x17\x02\x07\x19\x02\b\x1b\x02\t\x1d\x02\n\x1f\x02\v!\x02\f#\x02\r%\x02\x0e'\x02\x0f)\x02\x10\x03\x02\x06\x05\x02C\\aac|\x04\x02GGgg\x04\x02--//\x05\x02\v\f\x0f\x0f\"\"\x02w\x02\x03\x03\x02\x02\x02\x02\t\x03\x02\x02\x02\x02\x13\x03\x02\x02\x02\x02\x15\x03\x02\x02\x02\x02\x17\x03\x02\x02\x02\x02\x19\x03\x02\x02\x02\x02\x1b\x03\x02\x02\x02\x02\x1d\x03\x02\x02\x02\x02\x1f\x03\x02\x02\x02\x02!\x03\x02\x02\x02\x02#\x03\x02\x02\x02\x02%\x03\x02\x02\x02\x02'\x03\x02\x02\x02\x02)\x03\x02\x02\x02\x03+\x03\x02\x02\x02\x053\x03\x02\x02\x02\x077\x03\x02\x02\x02\t9\x03\x02\x02\x02\vC\x03\x02\x02\x02\rP\x03\x02\x02\x02\x0fT\x03\x02\x02\x02\x11V\x03\x02\x02\x02\x13X\x03\x02\x02\x02\x15Z\x03\x02\x02\x02\x17\\\x03\x02\x02\x02\x19^\x03\x02\x02\x02\x1b`\x03\x02\x02\x02\x1db\x03\x02\x02\x02\x1fd\x03\x02\x02\x02!f\x03\x02\x02\x02#h\x03\x02\x02\x02%j\x03\x02\x02\x02'l\x03\x02\x02\x02)o\x03\x02\x02\x02+/\x05\x05\x03\x02,.\x05\x07\x04\x02-,\x03\x02\x02\x02.1\x03\x02\x02\x02/-\x03\x02\x02\x02/0\x03\x02\x02\x020\x04\x03\x02\x02\x021/\x03\x02\x02\x0224\t\x02\x02\x0232\x03\x02\x02\x024\x06\x03\x02\x02\x0258\x05\x05\x03\x0268\x042;\x0275\x03\x02\x02\x0276\x03\x02\x02\x028\b\x03\x02\x02\x029@\x05\v\x06\x02:<\x05\x0f\b\x02;=\x05\x11\t\x02<;\x03\x02\x02\x02<=\x03\x02\x02\x02=>\x03\x02\x02\x02>?\x05\r\x07\x02?A\x03\x02\x02\x02@:\x03\x02\x02\x02@A\x03\x02\x02\x02A\n\x03\x02\x02\x02BD\x042;\x02CB\x03\x02\x02\x02DE\x03\x02\x02\x02EC\x03\x02\x02\x02EF\x03\x02\x02\x02FM\x03\x02\x02\x02GI\x070\x02\x02HJ\x042;\x02IH\x03\x02\x02\x02JK\x03\x02\x02\x02KI\x03\x02\x02\x02KL\x03\x02\x02\x02LN\x03\x02\x02\x02MG\x03\x02\x02\x02MN\x03\x02\x02\x02N\f\x03\x02\x02\x02OQ\x042;\x02PO\x03\x02\x02\x02QR\x03\x02\x02\x02RP\x03\x02\x02\x02RS\x03\x02\x02\x02S\x0e\x03\x02\x02\x02TU\t\x03\x02\x02U\x10\x03\x02\x02\x02VW\t\x04\x02\x02W\x12\x03\x02\x02\x02XY\x07*\x02\x02Y\x14\x03\x02\x02\x02Z[\x07+\x02\x02[\x16\x03\x02\x02\x02\\]\x07-\x02\x02]\x18\x03\x02\x02\x02^_\x07/\x02\x02_\x1a\x03\x02\x02\x02`a\x07,\x02\x02a\x1c\x03\x02\x02\x02bc\x071\x02\x02c\x1e\x03\x02\x02\x02de\x07@\x02\x02e \x03\x02\x02\x02fg\x07>\x02\x02g\"\x03\x02\x02\x02hi\x07?\x02\x02i$\x03\x02\x02\x02jk\x070\x02\x02k&\x03\x02\x02\x02lm\x07`\x02\x02m(\x03\x02\x02\x02np\t\x05\x02\x02on\x03\x02\x02\x02pq\x03\x02\x02\x02qo\x03\x02\x02\x02qr\x03\x02\x02\x02rs\x03\x02\x02\x02st\b\x15\x02\x02t*\x03\x02\x02\x02\r\x02/37<@EKMRq\x03\b\x02\x02",it.__ATN=void 0;var at=r(37),ct=r(56),ut=r(64),ot=r(62),st=r(29),lt=r(63),pt=r(31),ht=r(23),ft=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,e)))._interp=new lt.ParserATNSimulator(t._ATN,Object(Xe.a)(r)),r}return Object(d.a)(t,e),Object(p.a)(t,[{key:"vocabulary",get:function(){return t.VOCABULARY}},{key:"grammarFileName",get:function(){return"Expression.g4"}},{key:"ruleNames",get:function(){return t.ruleNames}},{key:"serializedATN",get:function(){return t._serializedATN}}]),Object(p.a)(t,[{key:"file",value:function(){var e=new vt(this._ctx,this.state);this.enterRule(e,0,t.RULE_file);try{this.enterOuterAlt(e,1),this.state=12,this.expression(0),this.state=13,this.match(t.EOF)}catch(r){if(!(r instanceof pt.RecognitionException))throw r;e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r)}finally{this.exitRule()}return e}},{key:"expression",value:function(e){void 0===e&&(e=0);var r,n=this._ctx,i=this.state,a=new yt(this._ctx,i);this.enterRecursionRule(a,2,t.RULE_expression,e);try{var c;switch(this.enterOuterAlt(a,1),this.state=24,this._errHandler.sync(this),this._input.LA(1)){case t.LPAREN:this.state=16,this.match(t.LPAREN),this.state=17,this.expression(0),this.state=18,this.match(t.RPAREN);break;case t.PLUS:this.state=20,this.match(t.PLUS);break;case t.MINUS:this.state=21,this.match(t.MINUS),this.state=22,this.atom();break;case t.VARIABLE:case t.SCIENTIFIC_NUMBER:this.state=23,this.atom();break;default:throw new ut.NoViableAltException(this)}for(this._ctx._stop=this._input.tryLT(-1),this.state=37,this._errHandler.sync(this),c=this.interpreter.adaptivePredict(this._input,2,this._ctx);2!==c&&c!==at.ATN.INVALID_ALT_NUMBER;){if(1===c)switch(null!=this._parseListeners&&this.triggerExitRuleEvent(),a,this.state=35,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,1,this._ctx)){case 1:if(a=new yt(n,i),this.pushNewRecursionContext(a,2,t.RULE_expression),this.state=26,!this.precpred(this._ctx,7))throw new ct.FailedPredicateException(this,"this.precpred(this._ctx, 7)");this.state=27,this.match(t.POW),this.state=28,this.expression(8);break;case 2:if(a=new yt(n,i),this.pushNewRecursionContext(a,2,t.RULE_expression),this.state=29,!this.precpred(this._ctx,6))throw new ct.FailedPredicateException(this,"this.precpred(this._ctx, 6)");this.state=30,(r=this._input.LA(1))!==t.TIMES&&r!==t.DIV?this._errHandler.recoverInline(this):(this._input.LA(1)===ht.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()),this.state=31,this.expression(7);break;case 3:if(a=new yt(n,i),this.pushNewRecursionContext(a,2,t.RULE_expression),this.state=32,!this.precpred(this._ctx,5))throw new ct.FailedPredicateException(this,"this.precpred(this._ctx, 5)");this.state=33,(r=this._input.LA(1))!==t.PLUS&&r!==t.MINUS?this._errHandler.recoverInline(this):(this._input.LA(1)===ht.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()),this.state=34,this.expression(6)}this.state=39,this._errHandler.sync(this),c=this.interpreter.adaptivePredict(this._input,2,this._ctx)}}catch(u){if(!(u instanceof pt.RecognitionException))throw u;a.exception=u,this._errHandler.reportError(this,u),this._errHandler.recover(this,u)}finally{this.unrollRecursionContexts(n)}return a}},{key:"atom",value:function(){var e=new mt(this._ctx,this.state);this.enterRule(e,4,t.RULE_atom);try{switch(this.state=42,this._errHandler.sync(this),this._input.LA(1)){case t.SCIENTIFIC_NUMBER:this.enterOuterAlt(e,1),this.state=40,this.scientific();break;case t.VARIABLE:this.enterOuterAlt(e,2),this.state=41,this.variable();break;default:throw new ut.NoViableAltException(this)}}catch(r){if(!(r instanceof pt.RecognitionException))throw r;e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r)}finally{this.exitRule()}return e}},{key:"scientific",value:function(){var e=new bt(this._ctx,this.state);this.enterRule(e,6,t.RULE_scientific);try{this.enterOuterAlt(e,1),this.state=44,this.match(t.SCIENTIFIC_NUMBER)}catch(r){if(!(r instanceof pt.RecognitionException))throw r;e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r)}finally{this.exitRule()}return e}},{key:"variable",value:function(){var e=new Ot(this._ctx,this.state);this.enterRule(e,8,t.RULE_variable);try{this.enterOuterAlt(e,1),this.state=46,this.match(t.VARIABLE)}catch(r){if(!(r instanceof pt.RecognitionException))throw r;e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r)}finally{this.exitRule()}return e}},{key:"relop",value:function(){var e,r=new wt(this._ctx,this.state);this.enterRule(r,10,t.RULE_relop);try{this.enterOuterAlt(r,1),this.state=48,0!==(-32&(e=this._input.LA(1)))||0===(1<<e&(1<<t.GT|1<<t.LT|1<<t.EQ))?this._errHandler.recoverInline(this):(this._input.LA(1)===ht.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(n){if(!(n instanceof pt.RecognitionException))throw n;r.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n)}finally{this.exitRule()}return r}},{key:"sempred",value:function(e,t,r){switch(t){case 1:return this.expression_sempred(e,r)}return!0}},{key:"expression_sempred",value:function(e,t){switch(t){case 0:return this.precpred(this._ctx,7);case 1:return this.precpred(this._ctx,6);case 2:return this.precpred(this._ctx,5)}return!0}}],[{key:"_ATN",get:function(){return t.__ATN||(t.__ATN=(new Ze.ATNDeserializer).deserialize(nt.toCharArray(t._serializedATN))),t.__ATN}}]),t}(ot.Parser);ft.VARIABLE=1,ft.SCIENTIFIC_NUMBER=2,ft.LPAREN=3,ft.RPAREN=4,ft.PLUS=5,ft.MINUS=6,ft.TIMES=7,ft.DIV=8,ft.GT=9,ft.LT=10,ft.EQ=11,ft.POINT=12,ft.POW=13,ft.WS=14,ft.RULE_file=0,ft.RULE_expression=1,ft.RULE_atom=2,ft.RULE_scientific=3,ft.RULE_variable=4,ft.RULE_relop=5,ft.ruleNames=["file","expression","atom","scientific","variable","relop"],ft._LITERAL_NAMES=[void 0,void 0,void 0,"'('","')'","'+'","'-'","'*'","'/'","'>'","'<'","'='","'.'","'^'"],ft._SYMBOLIC_NAMES=[void 0,"VARIABLE","SCIENTIFIC_NUMBER","LPAREN","RPAREN","PLUS","MINUS","TIMES","DIV","GT","LT","EQ","POINT","POW","WS"],ft.VOCABULARY=new rt.VocabularyImpl(ft._LITERAL_NAMES,ft._SYMBOLIC_NAMES,[]),ft._serializedATN="\x03\uc91d\ucaba\u058d\uafba\u4f53\u0607\uea8b\uc241\x03\x105\x04\x02\t\x02\x04\x03\t\x03\x04\x04\t\x04\x04\x05\t\x05\x04\x06\t\x06\x04\x07\t\x07\x03\x02\x03\x02\x03\x02\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x05\x03\x1b\n\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x07\x03&\n\x03\f\x03\x0e\x03)\v\x03\x03\x04\x03\x04\x05\x04-\n\x04\x03\x05\x03\x05\x03\x06\x03\x06\x03\x07\x03\x07\x03\x07\x02\x02\x03\x04\b\x02\x02\x04\x02\x06\x02\b\x02\n\x02\f\x02\x02\x05\x03\x02\t\n\x03\x02\x07\b\x03\x02\v\r\x025\x02\x0e\x03\x02\x02\x02\x04\x1a\x03\x02\x02\x02\x06,\x03\x02\x02\x02\b.\x03\x02\x02\x02\n0\x03\x02\x02\x02\f2\x03\x02\x02\x02\x0e\x0f\x05\x04\x03\x02\x0f\x10\x07\x02\x02\x03\x10\x03\x03\x02\x02\x02\x11\x12\b\x03\x01\x02\x12\x13\x07\x05\x02\x02\x13\x14\x05\x04\x03\x02\x14\x15\x07\x06\x02\x02\x15\x1b\x03\x02\x02\x02\x16\x1b\x07\x07\x02\x02\x17\x18\x07\b\x02\x02\x18\x1b\x05\x06\x04\x02\x19\x1b\x05\x06\x04\x02\x1a\x11\x03\x02\x02\x02\x1a\x16\x03\x02\x02\x02\x1a\x17\x03\x02\x02\x02\x1a\x19\x03\x02\x02\x02\x1b'\x03\x02\x02\x02\x1c\x1d\f\t\x02\x02\x1d\x1e\x07\x0f\x02\x02\x1e&\x05\x04\x03\n\x1f \f\b\x02\x02 !\t\x02\x02\x02!&\x05\x04\x03\t\"#\f\x07\x02\x02#$\t\x03\x02\x02$&\x05\x04\x03\b%\x1c\x03\x02\x02\x02%\x1f\x03\x02\x02\x02%\"\x03\x02\x02\x02&)\x03\x02\x02\x02'%\x03\x02\x02\x02'(\x03\x02\x02\x02(\x05\x03\x02\x02\x02)'\x03\x02\x02\x02*-\x05\b\x05\x02+-\x05\n\x06\x02,*\x03\x02\x02\x02,+\x03\x02\x02\x02-\x07\x03\x02\x02\x02./\x07\x04\x02\x02/\t\x03\x02\x02\x0201\x07\x03\x02\x021\v\x03\x02\x02\x0223\t\x04\x02\x023\r\x03\x02\x02\x02\x06\x1a%',",ft.__ATN=void 0;var dt,vt=function(e){function t(e,r){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).call(this,e,r))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"expression",value:function(){return this.getRuleContext(0,yt)}},{key:"EOF",value:function(){return this.getToken(ft.EOF,0)}}]),Object(p.a)(t,[{key:"enterRule",value:function(e){e.enterFile&&e.enterFile(this)}},{key:"exitRule",value:function(e){e.exitFile&&e.exitFile(this)}},{key:"accept",value:function(e){return e.visitFile?e.visitFile(this):e.visitChildren(this)}},{key:"ruleIndex",get:function(){return ft.RULE_file}}]),t}(st.ParserRuleContext),yt=function(e){function t(e,r){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).call(this,e,r))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"expression",value:function(e){return void 0===e?this.getRuleContexts(t):this.getRuleContext(e,t)}},{key:"POW",value:function(){return this.tryGetToken(ft.POW,0)}},{key:"TIMES",value:function(){return this.tryGetToken(ft.TIMES,0)}},{key:"DIV",value:function(){return this.tryGetToken(ft.DIV,0)}},{key:"PLUS",value:function(){return this.tryGetToken(ft.PLUS,0)}},{key:"MINUS",value:function(){return this.tryGetToken(ft.MINUS,0)}},{key:"LPAREN",value:function(){return this.tryGetToken(ft.LPAREN,0)}},{key:"RPAREN",value:function(){return this.tryGetToken(ft.RPAREN,0)}},{key:"atom",value:function(){return this.tryGetRuleContext(0,mt)}}]),Object(p.a)(t,[{key:"enterRule",value:function(e){e.enterExpression&&e.enterExpression(this)}},{key:"exitRule",value:function(e){e.exitExpression&&e.exitExpression(this)}},{key:"accept",value:function(e){return e.visitExpression?e.visitExpression(this):e.visitChildren(this)}},{key:"ruleIndex",get:function(){return ft.RULE_expression}}]),t}(st.ParserRuleContext),mt=function(e){function t(e,r){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).call(this,e,r))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"scientific",value:function(){return this.tryGetRuleContext(0,bt)}},{key:"variable",value:function(){return this.tryGetRuleContext(0,Ot)}}]),Object(p.a)(t,[{key:"enterRule",value:function(e){e.enterAtom&&e.enterAtom(this)}},{key:"exitRule",value:function(e){e.exitAtom&&e.exitAtom(this)}},{key:"accept",value:function(e){return e.visitAtom?e.visitAtom(this):e.visitChildren(this)}},{key:"ruleIndex",get:function(){return ft.RULE_atom}}]),t}(st.ParserRuleContext),bt=function(e){function t(e,r){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).call(this,e,r))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"SCIENTIFIC_NUMBER",value:function(){return this.getToken(ft.SCIENTIFIC_NUMBER,0)}}]),Object(p.a)(t,[{key:"enterRule",value:function(e){e.enterScientific&&e.enterScientific(this)}},{key:"exitRule",value:function(e){e.exitScientific&&e.exitScientific(this)}},{key:"accept",value:function(e){return e.visitScientific?e.visitScientific(this):e.visitChildren(this)}},{key:"ruleIndex",get:function(){return ft.RULE_scientific}}]),t}(st.ParserRuleContext),Ot=function(e){function t(e,r){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).call(this,e,r))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"VARIABLE",value:function(){return this.getToken(ft.VARIABLE,0)}}]),Object(p.a)(t,[{key:"enterRule",value:function(e){e.enterVariable&&e.enterVariable(this)}},{key:"exitRule",value:function(e){e.exitVariable&&e.exitVariable(this)}},{key:"accept",value:function(e){return e.visitVariable?e.visitVariable(this):e.visitChildren(this)}},{key:"ruleIndex",get:function(){return ft.RULE_variable}}]),t}(st.ParserRuleContext),wt=function(e){function t(e,r){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).call(this,e,r))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"EQ",value:function(){return this.tryGetToken(ft.EQ,0)}},{key:"GT",value:function(){return this.tryGetToken(ft.GT,0)}},{key:"LT",value:function(){return this.tryGetToken(ft.LT,0)}}]),Object(p.a)(t,[{key:"enterRule",value:function(e){e.enterRelop&&e.enterRelop(this)}},{key:"exitRule",value:function(e){e.exitRelop&&e.exitRelop(this)}},{key:"accept",value:function(e){return e.visitRelop?e.visitRelop(this):e.visitChildren(this)}},{key:"ruleIndex",get:function(){return ft.RULE_relop}}]),t}(st.ParserRuleContext),jt=r(79),xt=r(171);!function(e){e.id="id",e.plus="+",e.minus="-",e.mul="*",e.div="/",e.pow="^"}(dt||(dt={}));var gt=function(e){function t(e,r){var n;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(f.a)(t).call(this,W.expression))).operator=void 0,n.type=W.expression,n.children=void 0,n.children=r,n.operator=e,n}return Object(d.a)(t,e),t}(ie),Et=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,W.symbol))).symbol=void 0,r.type=W.symbol,r.symbol=e,r.name=e,r}return Object(d.a)(t,e),t}(ie),Rt=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,W.variable))).variable=void 0,r.type=W.variable,r.variable=e,r.name=e,r}return Object(d.a)(t,e),t}(ie),Nt=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"defaultResult",value:function(){return[]}},{key:"aggregateResult",value:function(e,t){return[].concat(Object(pe.a)(e),Object(pe.a)(t))}},{key:"visitVariable",value:function(e){return[new Rt(e.text)]}},{key:"visitScientific",value:function(e){return[new Ae(parseFloat(e.text))]}},{key:"visitAtom",value:function(e){return Object(jt.a)(Object(f.a)(t.prototype),"visitChildren",this).call(this,e)}},{key:"visitExpression",value:function(e){var r=Object(jt.a)(Object(f.a)(t.prototype),"visitChildren",this).call(this,e);return[new gt(dt.id,r)]}},{key:"visitFile",value:function(e){return Object(jt.a)(Object(f.a)(t.prototype),"visitChildren",this).call(this,e)}},{key:"visitRelop",value:function(e){return Object(jt.a)(Object(f.a)(t.prototype),"visitChildren",this).call(this,e)}},{key:"visitTerminal",value:function(e){return e.symbol.text?[new Et(e.symbol.text)]:[]}}]),t}(xt.AbstractParseTreeVisitor),kt=function(){function e(t){Object(l.a)(this,e),this._tree=void 0,this._parser=void 0,this._lexer=void 0,this._errorListener=void 0,this._errorListener=new $e;var r=new qe.ANTLRInputStream(t);this._lexer=new it(r);var n=new qe.CommonTokenStream(this._lexer);if(this._parser=new ft(n),this._parser.addErrorListener(this._errorListener),this._tree=this._parser.file(),this._errorListener.errors.length>0)throw this._errorListener.errors}return Object(p.a)(e,[{key:"toString",value:function(){return this._tree.toStringTree(this._parser.ruleNames)}},{key:"getTree",value:function(){return(new Nt).visit(this._tree)}},{key:"getRuleNames",value:function(){return this._parser.ruleNames}}]),e}();function _t(e){var t=e.split(" ");switch(t[0]){case"/clear":return br.dispatch(V()),void br.dispatch({type:n.ClearHistory});case"/parse":try{var r=new kt(t.slice(1).join(" "));return br.dispatch(w(r.getTree(),r.getRuleNames())),{output:"parsed: "+r.toString()}}catch(D){return{output:"",error:D.map((function(e){return e.message})).join("\n")}}case"/p":try{var i=new kt(t.slice(1).join(" ")),a=ze(i.getTree()[0]);return a&&br.dispatch(w([a],i.getRuleNames())),{output:"parsed: "+i.toString()}}catch(D){return{output:"",error:D.map((function(e){return e.message})).join("\n")}}case"/p2":try{var c=new kt(t.slice(1).join(" ")),u=ze(c.getTree()[0]);return(u=De(u=Ne(u)))&&br.dispatch(w([u],c.getRuleNames())),{output:"parsed: "+c.toString()}}catch(D){return{output:"",error:D.map((function(e){return e.message})).join("\n")}}case"/simplify":var o=Re.a.cloneDeep(N(br.getState()));if(o){var s=ze(o.tree[0]);return s&&br.dispatch(w([s],o.ruleNames)),{output:"Simplified to: "+ae(s)}}return{output:"",error:"Nothing to simplify"};case"/associative":var l=Re.a.cloneDeep(N(br.getState()));if(l){var p=Ne(l.tree[0]);return p&&br.dispatch(w([p],l.ruleNames)),{output:"Result: "+ae(p)}}return{output:"",error:"Nothing to apply rule to"};case"/identity":var h=Re.a.cloneDeep(N(br.getState()));if(h){var f=Se(h.tree[0]);return f&&br.dispatch(w([f],h.ruleNames)),{output:"Result: "+ae(f)}}return{output:"",error:"Nothing to apply rule to"};case"/power":var d=Re.a.cloneDeep(N(br.getState()));if(d){var v=Be(d.tree[0]);return v&&br.dispatch(w([v],d.ruleNames)),{output:"Result: "+ae(v)}}return{output:"",error:"Nothing to apply rule to"};case"/brackets":var y=Re.a.cloneDeep(N(br.getState()));if(y){var m=Ie(y.tree[0]);return m&&br.dispatch(w([m],y.ruleNames)),{output:"Result: "+ae(m)}}return{output:"",error:"Nothing to apply rule to"};case"/defined":var b=Re.a.cloneDeep(N(br.getState())),O=Re.a.cloneDeep(N(br.getState()));return b&&O?Je(O.tree[0]).type===W.null?{output:"Result: the expression is undefined"}:{output:"Result: "+ae(b.tree[0])}:{output:"",error:"Nothing to apply rule to"};case"/numerical":var j=Re.a.cloneDeep(N(br.getState()));if(j){var x=Le(j.tree[0]);return x&&br.dispatch(w([x],j.ruleNames)),{output:"Result: "+ae(x)}}return{output:"",error:"Nothing to apply rule to"};case"/order":var g=Re.a.cloneDeep(N(br.getState()));if(g){var E=De(g.tree[0]);return E&&br.dispatch(w([E],g.ruleNames)),{output:"Result: "+ae(E)}}return{output:"",error:"Nothing to apply rule to"};case"/likeTerms":var R=Re.a.cloneDeep(N(br.getState()));if(R){var k=Ce(R.tree[0]);return k&&br.dispatch(w([k],R.ruleNames)),{output:"Result: "+ae(k)}}return{output:"",error:"Nothing to apply rule to"};case"/model1":try{var _=new kt(t.slice(1).join(" "));br.dispatch(w(_.getTree(),_.getRuleNames()));var I=Re.a.cloneDeep(br.dispatch(w(_.getTree(),_.getRuleNames())));if(I){var A=ze(I.tree[0]);A&&br.dispatch(w([A],I.ruleNames));for(var S=Re.a.cloneDeep(A),T=Re.a.cloneDeep(A),C=0;C<100;C++){if(T&&Je(T).type===W.null)return{output:"Result: the expression is undefined"};S&&(S=Le(S=Ce(S=Ie(S=Be(S=Se(S=Ne(S)))))))}return{output:"Result: "+ae(S)}}return{output:"",error:"Nothing to apply rule to"}}catch(D){return{output:"",error:D.map((function(e){return e.message})).join("\n")}}case"/power2":var L=Re.a.cloneDeep(N(br.getState()));if(L){var H=We(L.tree[0]);return H&&br.dispatch(w([H],L.ruleNames)),{output:"Result: "+ae(H)}}return{output:"",error:"Nothing to apply rule to"};case"/smart":var U=Re.a.cloneDeep(N(br.getState()));if(U){var P=Qe(U.tree[0]);return P&&br.dispatch(w([P],U.ruleNames)),{output:"Result: "+ae(P)}}return{output:"",error:"Nothing to apply rule to"};default:return{output:"",error:"Command '".concat(t[0],"' not recognized")}}}var It=le.a.mark(Pt),At=le.a.mark(Dt),St=le.a.mark(Mt),Tt=le.a.mark(Bt),Ct=le.a.mark(Vt),Lt=le.a.mark(Ft),Ht=le.a.mark(Gt),Ut=le.a.mark(Wt);function Pt(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.g)(g.ExecuteInput,Dt);case 2:case"end":return e.stop()}}),It)}function Dt(e){var t,r,n;return le.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(de.a)([Object(de.e)(B({isInput:!0,line:e.input,isError:!1})),Object(de.e)((a=e.input,{input:a,type:g.AddToInputHistory}))]);case 2:return i.next=4,Object(de.b)(_t,e.input);case 4:if(!(t=i.sent)){i.next=14;break}if(r=t.output,!(n=t.error)){i.next=12;break}return i.next=10,Object(de.a)(n.split("\n").map((function(e){return Object(de.e)(B({isInput:!1,line:e,isError:!0}))})));case 10:i.next=14;break;case 12:return i.next=14,Object(de.a)(r.split("\n").map((function(e){return Object(de.e)(B({isInput:!1,line:e,isError:!1}))})));case 14:return i.next=16,Object(de.d)(G());case 16:case"end":return i.stop()}var a}),At)}function Mt(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.g)(g.LoadHistory,Bt);case 2:case"end":return e.stop()}}),St)}function Bt(){var e;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(de.b)(ge);case 2:return e=t.sent,t.next=5,Object(de.e)(F(e));case 5:case"end":return t.stop()}}),Tt)}function Vt(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.g)(g.ClearHistory,Ft);case 2:case"end":return e.stop()}}),Ct)}function Ft(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.e)(F({lines:[],inputHistory:[]}));case 2:return e.next=4,Object(de.d)(G());case 4:case"end":return e.stop()}}),Lt)}function Gt(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.g)(g.SaveHistory,Wt);case 2:case"end":return e.stop()}}),Ht)}function Wt(){var e,t;return le.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(de.f)(z);case 2:return e=r.sent,r.next=5,Object(de.f)(Q);case 5:return t=r.sent,r.next=8,Object(de.b)(xe,{lines:e,inputHistory:t});case 8:case"end":return r.stop()}}),Ut)}var zt=[Pt,Mt,Gt,Vt];function Qt(e){localStorage.setItem("treeCache",JSON.stringify(e))}function Yt(){var e=localStorage.getItem("treeCache");return e?JSON.parse(e):{history:[],index:-1}}var Jt=le.a.mark(rr),Kt=le.a.mark(nr),qt=le.a.mark(ir),$t=le.a.mark(ar),Xt=le.a.mark(cr),Zt=le.a.mark(ur),er=le.a.mark(or),tr=le.a.mark(sr);function rr(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.g)(n.UpdateTree,nr);case 2:case"end":return e.stop()}}),Jt)}function nr(e){return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(de.e)((r=e.tree,{ruleNames:e.ruleNames,tree:r,type:n.AddToHistory}));case 2:return t.next=4,Object(de.d)(x());case 4:case"end":return t.stop()}var r}),Kt)}function ir(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.g)(n.LoadHistory,ar);case 2:case"end":return e.stop()}}),qt)}function ar(){var e;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(de.b)(Yt);case 2:return e=t.sent,t.next=5,Object(de.e)(j(e));case 5:case"end":return t.stop()}}),$t)}function cr(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.g)(n.ClearHistory,ur);case 2:case"end":return e.stop()}}),Xt)}function ur(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.e)(j({history:[],index:-1}));case 2:return e.next=4,Object(de.d)(x());case 4:case"end":return e.stop()}}),Zt)}function or(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.g)(n.SaveHistory,sr);case 2:case"end":return e.stop()}}),er)}function sr(){var e;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(de.f)((function(e){return e.tree}));case 2:return e=t.sent,t.next=5,Object(de.b)(Qt,e);case 5:case"end":return t.stop()}}),tr)}var lr=[rr,ir,or,cr],pr=le.a.mark(vr),hr=[].concat(Object(pe.a)(zt),Object(pe.a)(lr)),fr={console:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.AddToInputHistory:return me({},e,{inputHistory:[].concat(Object(pe.a)(e.inputHistory),[t.input])});case g.AddToLog:return me({},e,{lines:[].concat(Object(pe.a)(e.lines),[t.line])});case g.SetHistory:return me({},t.history);default:return e}},tree:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.AddToHistory:return{history:[].concat(Object(pe.a)(e.history||[]),[{tree:t.tree,ruleNames:t.ruleNames}]),index:e.history.length};case n.SetHistory:return we({},t.history);case n.Undo:return we({},e,{index:e.index-1});case n.Redo:return we({},e,{index:e.index+1});default:return e}}},dr=Object(he.combineReducers)(fr);function vr(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.c)(Bt);case 2:return e.next=4,Object(de.c)(ar);case 4:return e.next=6,Object(de.a)(hr.map((function(e){return e()})));case 6:case"end":return e.stop()}}),pr)}var yr=Object(fe.a)(),mr=Object(he.createStore)(dr,Object(he.applyMiddleware)(yr));yr.run(vr);var br=mr,Or=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidCatch",value:function(e,t){console.error(e,e.stack,t.componentStack),br.dispatch(B({isError:!0,isInput:!1,line:e.message}))}},{key:"render",value:function(){return u.a.createElement(v.a,{store:br},u.a.createElement(u.a.Fragment,null,u.a.createElement(H,null,u.a.createElement("h3",null,"Test")),u.a.createElement(oe,null),u.a.createElement(te,null)))}}]),t}(u.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.b.add({faArrowRight:a.a,faRedo:a.b,faTrashAlt:a.c,faUndo:a.d}),s.a.render(u.a.createElement(Or,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[230,1,2]]]);
//# sourceMappingURL=main.9690a237.chunk.js.map