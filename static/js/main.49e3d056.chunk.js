/*! For license information please see main.49e3d056.chunk.js.LICENSE */
(this["webpackJsonpformula-manipulation"]=this["webpackJsonpformula-manipulation"]||[]).push([[0],{231:function(e,t,r){e.exports=r(326)},242:function(e,t,r){},253:function(e,t,r){},254:function(e,t,r){},326:function(e,t,r){"use strict";r.r(t);var n,i=r(78),a=r(79),c=r(1),o=r.n(c),u=r(50),s=r.n(u),l=r(10),p=r(16),h=r(14),d=r(11),f=r(15),v=r(36),y=(r(242),r(331)),m=r(332),b=r(333),w=r(330);function x(e,t){return{ruleNames:t,tree:e,type:n.UpdateTree}}function g(e){return{history:e,type:n.SetHistory}}function O(){return{type:n.SaveHistory}}!function(e){e.UpdateTree="Tree/UpdateTree",e.AddToHistory="Tree/AddToHistory",e.Undo="Tree/Undo",e.Redo="Tree/Redo",e.ClearHistory="Tree/ClearHistory",e.LoadHistory="Tree/LoadHistory",e.SetHistory="Tree/SetHistory",e.SaveHistory="Tree/SaveHistory"}(n||(n={}));var j,E=function(e){return e.tree.index>0},R=function(e){return e.tree.index<e.tree.history.length-1},N=function(e){return e.tree.index>=0?e.tree.history[e.tree.index]:void 0},k=r(97),_=r(69),I=r(328),T=r(329),A=r(336),S=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,r=e.id,n=e.icon,i=e.onClickButton,a=Object(k.a)(e,["name","id","icon","onClickButton"]);return c.createElement(I.a,null,c.createElement(T.a,Object.assign({},a,{id:r||"".concat(t.replace(" ",""),"Button"),onClick:i}),c.createElement(_.a,{icon:n}),c.createElement(A.a,{target:r||"".concat(t.replace(" ",""),"Button")},t)))}}]),t}(c.Component),C=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return c.createElement(w.a,{inline:!0,onSubmit:function(e){return e.preventDefault()}},c.createElement(S,{id:"Undo",name:"Undo last action",icon:"undo",color:"primary",className:"mr-sm-2",disabled:!this.props.canUndo,onClickButton:this.props.undo}),c.createElement(S,{id:"Redo",name:"Redo",icon:"redo",color:"primary",className:"mr-sm-2",disabled:!this.props.canRedo,onClickButton:this.props.redo}))}}]),t}(c.Component),L=Object(v.b)((function(e){return{canRedo:R(e),canUndo:E(e)}}),(function(e){return{redo:function(){return e({type:n.Redo})},undo:function(){return e({type:n.Undo})}}}))(C),H=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return c.createElement(y.a,{color:"light",light:!0},c.createElement(m.a,{href:"/"},"Formula Handling - Group 8"),c.createElement(b.a,{navbar:!0},c.createElement(L,null)))}}]),t}(c.Component),U=r(335),D=r(129),P=r.n(D),M=r(334);function B(e){return{line:e,type:j.AddToLog}}function V(){return{type:j.ClearHistory}}function F(e){return{history:e,type:j.SetHistory}}function G(){return{type:j.SaveHistory}}!function(e){e.AddToLog="Console/Log",e.ExecuteInput="Console/ExecuteInput",e.AddToInputHistory="Console/AddToInputHistory",e.ClearHistory="Console/ClearHistory",e.LoadHistory="Console/LoadHistory",e.SetHistory="Console/SetHistory",e.SaveHistory="Console/SaveHistory"}(j||(j={}));var W,z=function(e){return e.console.lines},Q=function(e){return e.console.inputHistory},Y=function(e){return e.console.lines.length>0},J=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(d.a)(t).call(this,e))).cycle=function(e){if("ArrowUp"===e.key)if(-1===r.state.cycleIndex){var t=r.props.inputHistory.length-1;t>-1&&r.setState({cycleIndex:t,input:r.props.inputHistory[t],tempInput:r.state.input})}else if(0===r.state.cycleIndex){r.props.inputHistory.length;r.setState({cycleIndex:-1,input:r.state.tempInput||""})}else{var n=r.state.cycleIndex-1;r.setState({cycleIndex:n,input:r.props.inputHistory[n]})}else if("ArrowDown"===e.key)if(-1===r.state.cycleIndex){r.props.inputHistory.length>0&&r.setState({cycleIndex:0,input:r.props.inputHistory[0],tempInput:r.state.input})}else if(r.state.cycleIndex===r.props.inputHistory.length-1)r.setState({cycleIndex:-1,input:r.state.tempInput||""});else{var i=r.state.cycleIndex+1;r.setState({cycleIndex:i,input:r.props.inputHistory[i]})}},r.execute=function(){r.props.executeInput(r.state.input),r.setState({input:""})},r.handleInputChange=function(e){r.setState({cycleIndex:-1,input:e.target.value,tempInput:void 0})},r.state={cycleIndex:-1,input:""},r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return c.createElement(w.a,{inline:!0,onSubmit:function(t){t.preventDefault(),e.execute()}},c.createElement(M.a,{value:this.state.input,onChange:this.handleInputChange,onKeyDown:this.cycle}),c.createElement(T.a,{onClick:this.execute},c.createElement(_.a,{icon:"arrow-right"})))}},{key:"componentDidUpdate",value:function(){var e=P()(".LogView");e.scrollTop(e.prop("scrollHeight"))}},{key:"componentDidMount",value:function(){var e=P()(".LogView");e.scrollTop(e.prop("scrollHeight"))}}]),t}(c.Component),K=Object(v.b)((function(e){return{inputHistory:Q(e)}}),(function(e){return{executeInput:function(t){return e(function(e){return{input:e,type:j.ExecuteInput}}(t))}}}))(J),q=(r(253),function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,r=e.id,n=e.icon,i=e.onClickButton,a=Object(k.a)(e,["name","id","icon","onClickButton"]);return c.createElement(T.a,Object.assign({size:"sm"},a,{id:r||"".concat(t.replace(" ",""),"Button"),onClick:i}),c.createElement(_.a,{icon:n}),c.createElement(A.a,{target:r||"".concat(t.replace(" ",""),"Button")},t))}}]),t}(c.Component)),$=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return c.createElement(q,{id:"Clear",name:"Clear",icon:"trash-alt",color:"danger",disabled:!this.props.canClear,onClickButton:this.props.clear})}}]),t}(c.Component),X=Object(v.b)((function(e){return{canClear:Y(e)}}),(function(e){return{clear:function(){return e(V())}}}))($),Z=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return c.createElement("div",{className:"LogView"},this.props.lines.map((function(e,t){return e.isInput?c.createElement("p",{key:t},c.createElement("code",{className:"input"},"> "+e.line)):e.isError?c.createElement("p",{key:t},c.createElement("code",{className:"error"},e.line)):c.createElement("p",{key:t},c.createElement("code",{className:"output"},e.line))})))}}]),t}(c.Component),ee=Object(v.b)((function(e){return{lines:z(e)}}))(Z),te=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return c.createElement(c.Fragment,null,c.createElement("div",{className:"HeaderWrapper"},c.createElement(U.a,{className:"ConsoleHeader"},c.createElement("p",{className:"h6"},"Console"),c.createElement(X,null))),c.createElement(U.a,{className:"ConsoleView"},c.createElement(ee,null),c.createElement(K,null)))}}]),t}(c.Component),re=r(99),ne=r(95);!function(e){e.null="null",e.expression="expression",e.number="number",e.variable="variable",e.symbol="symbol",e.summation="summation",e.product="product",e.power="power"}(W||(W={}));var ie=function e(t){Object(l.a)(this,e),this.name=void 0,this.hash=void 0,this.name=t};function ae(e){if(!e)return"null";switch(e.type){case W.null:return"";case W.variable:return e.variable;case W.number:return e.value.toString();case W.expression:return e.children?"?("+e.children.map((function(e){return ae(e)})).join(" ")+")":e.name;case W.symbol:return e.symbol;case W.power:return e.children?ce(e.children[0])?ce(e.children[1])?ae(e.children[0])+"^"+ae(e.children[1]):ae(e.children[0])+"^("+ae(e.children[1])+")":ce(e.children[1])?"("+ae(e.children[0])+")^"+ae(e.children[1]):"("+ae(e.children[0])+")^("+ae(e.children[1])+")":e.name;case W.summation:if(e.children){for(var t=e.children.slice(1,e.children.length-1),r=ae(e.children[0]),n=0;n<t.length;n++)t[n].type===W.number&&t[n].value<0?r+=ae(t[n]):t[n].type===W.variable&&"-"===t[n].variable.substring(0,1)?r+=ae(t[n]):r=r+"+"+ae(t[n]);return e.children[e.children.length-1].type===W.number&&e.children[e.children.length-1].value<0?r+=ae(e.children[e.children.length-1]):e.children[e.children.length-1].type===W.variable&&"-"===e.children[e.children.length-1].variable.substring(0,1)?r+=ae(e.children[e.children.length-1]):r=r+"+"+ae(e.children[e.children.length-1]),r}return e.name;case W.product:return e.children?e.children.map((function(e){return e.type===W.summation?"("+ae(e)+")":ae(e)})).join("*"):e.name;default:return""}}function ce(e){return e.type===W.variable||e.type===W.symbol||e.type===W.number&&e.value>=0}r(254);var oe=function(e){function t(){var e,r;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(r=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).svg=void 0,r.width=1100,r.tree=function(e){var t=Object(ne.b)(e);return t.data.dx=30,t.data.dy=r.width/(t.height+1),re.c().nodeSize([t.data.dx,t.data.dy])(t)},r.chart=function(e){var t=r.tree(e),n=1/0,i=-n;t.each((function(e){e.x>i&&(i=e.x),e.x<n&&(n=e.x)})),r.svg.attr("viewBox",[0,0,r.width,i-n+2*t.data.dx]);var a=r.svg.append("g").attr("font-family","sans-serif").attr("font-size",10).attr("transform","translate(".concat(t.data.dy/3,",").concat(t.data.dx-n,")")),c=(a.append("g").attr("fill","none").attr("stroke","#555").attr("stroke-opacity",.4).attr("stroke-width",1.5).selectAll("path").data(t.links()).join("path").attr("d",re.a().x((function(e){return e.y})).y((function(e){return e.x}))),a.append("g").attr("stroke-linejoin","round").attr("stroke-width",1).selectAll("g").data(t.descendants()).join("g").attr("transform",(function(e){return"translate(".concat(e.y,",").concat(e.x,")")})));c.append("rect").attr("fill",(function(e){return e.children?"#fff":"#eee"})).attr("stroke","#333").attr("x",-25).attr("y",-10).attr("width",50).attr("height",20),c.append("text").style("font-size","1em").attr("dy","0.31em").text((function(e){return e.data.name})).attr("text-anchor","middle").clone(!0).lower().attr("stroke","white")},r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return c.createElement(c.Fragment,null,c.createElement(U.a,{fluid:!0,className:"TreeView"},c.createElement("svg",{ref:function(t){return e.svg=re.b(t)},width:"100%"}),this.props.tree?c.createElement("span",{className:"StringView"},ae(this.props.tree.tree[0])):null))}},{key:"componentDidUpdate",value:function(){this.props.tree?(this.svg.select("g").remove(),this.chart(this.props.tree.tree[0])):this.svg.select("g").remove()}},{key:"componentDidMount",value:function(){this.props.tree?(this.svg.select("g").remove(),this.chart(this.props.tree.tree[0])):this.svg.select("g").remove()}}]),t}(c.Component),ue=Object(v.b)((function(e){return{tree:N(e)}}))(oe),se=r(17),le=r.n(se),pe=r(26),he=r(43),de=(r(256),r(174)),fe=r(18),ve=r(51),ye={inputHistory:[],lines:[]};var me={history:[],index:-1};function be(e){localStorage.setItem("consoleCache",JSON.stringify(e))}function we(){var e=localStorage.getItem("consoleCache");return e?JSON.parse(e):{lines:[],inputHistory:[]}}var xe=r(6),ge=r.n(xe);function Oe(e){return e.type!==W.summation&&e.type!==W.product||(e.children=e.children.map((function(e){return Oe(e)})),e.children=ge.a.flatten(e.children.map((function(t){return t.type===e.type?t.children:[t]})))),e}var je=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(d.a)(t).call(this,W.product))).type=W.product,r.children=void 0,r.children=e,r.name="*",r}return Object(f.a)(t,e),t}(ie),Ee=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(d.a)(t).call(this,W.summation))).type=W.summation,r.children=void 0,r.children=e,r.name="+",r}return Object(f.a)(t,e),t}(ie);function Re(e){switch(e.type!==W.summation&&e.type!==W.product&&e.type!==W.power||(e.children=e.children.map((function(e){return Re(e)}))),e.type){case W.product:return function(e){var t=e.children;if(2===t.length)for(var r=function(e){if(t[e].type===W.summation){if(0===e){var r=t[e].children.map((function(r){return new je([r,t[e+1]])}));return{v:new Ee(r)}}var n=t[e].children.map((function(r){return new je([r,t[e-1]])}));return{v:new Ee(n)}}},n=0;n<t.length;n++){var i=r(n);if("object"===typeof i)return i.v}else for(var a=function(e){if(t[e].type===W.summation){if(0===e){var r=t[e].children.map((function(r){return new je([r,t[e+1]])}));return{v:new je([new Ee(r),new je(t.slice(2,t.length))])}}var n=t[e].children.map((function(r){return new je([r,t[e-1]])}));return{v:new je([new Ee(n),new je(t.slice(0,e-1)),new je(t.slice(e+1,t.length))])}}},c=0;c<t.length;c++){var o=a(c);if("object"===typeof o)return o.v}return e}(e);default:return e}}var Ne=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(d.a)(t).call(this,W.variable))).value=void 0,r.type=W.number,r.value=e,r.name=e.toString(),r}return Object(f.a)(t,e),t}(ie),ke=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(d.a)(t).call(this,W.power))).type=W.power,r.children=void 0,r.children=e,r.name="^",r}return Object(f.a)(t,e),t}(ie);function _e(e){return e.type===W.summation?function(e){return e.children=e.children.map((function(e){return _e(e)})),e}(e):e.type===W.product?function(e){var t=ge.a.cloneDeep(e.children);return new Ee([new je([_e(t[0]),e.children[1]]),new je([e.children[0],_e(t[1])])])}(e):e.type===W.power?function(e){var t=ge.a.cloneDeep(e.children);return new je([e.children[1],new je([new ke([e.children[0],new Ee([e.children[1],new Ne(-1)])]),_e(t[0])])])}(e):e.type===W.variable&&"x"===e.variable?new Ne(1):new Ne(0)}var Ie=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(d.a)(t).call(this,W.variable))).variable=void 0,r.type=W.variable,r.variable=e,r.name=e,r}return Object(f.a)(t,e),t}(ie);function Te(e){if(e.type===W.summation||e.type===W.product||e.type===W.power){if(e.children=e.children.map((function(e){return Te(e)})),e.type===W.summation)return e;if(e.type===W.product)return function(e){if(2===e.children.length){var t=e.children[0],r=e.children[1];if(t.type===W.number&&r.type===W.variable&&t.value<0)return new Ie("-"+r.variable)}return e}(e)}return e}function Ae(e){e&&(e.type!==W.summation&&e.type!==W.product&&e.type!==W.power||e.children.forEach((function(e){return Ae(e)})),e.hash=function e(t){if(!t)return"null";switch(t.type){case W.null:return"";case W.variable:return t.variable;case W.number:return t.value.toString();case W.expression:return t.children?"?("+t.children.map((function(t){return e(t)})).join(" ")+")":t.name;case W.symbol:return t.symbol;case W.power:return t.children?"("+e(t.children[0])+"^"+e(t.children[1])+")":t.name;case W.summation:return t.children?"("+t.children.map((function(t){return e(t)})).join(" + ")+")":t.name;case W.product:return t.children?"("+t.children.map((function(t){return e(t)})).join(" * ")+")":t.name;default:return""}}(e))}function Se(e){return e.type!==W.summation&&e.type!==W.product&&e.type!==W.power||(e.children=e.children.map((function(e){return Se(e)}))),e.type===W.summation?function(e){return e.children=ge.a.compact(e.children.map((function(e){return e.type===W.number&&0===e.value?void 0:e}))),0===e.children.length?new Ne(0):1===e.children.length?e.children[0]:e}(e):e.type===W.product?function(e){e.children=ge.a.compact(e.children.map((function(e){return e.type===W.number&&1===e.value?void 0:e})));for(var t=e.children,r=0;r<t.length;r++)if(t[r].type===W.number&&0===t[r].value)return new Ne(0);return 0===e.children.length?new Ne(0):1===e.children.length?e.children[0]:e}(e):e.type===W.power?function(e){var t=e.children[0],r=e.children[1];if(r.type===W.number){if(0===r.value)return new Ne(1);if(1===r.value)return t}if(t.type===W.number&&(1===t.value||0===t.value))return t;return e}(e):e}function Ce(e){return e.type===W.summation&&Le(e)?(e.children=e.children.map((function(e){return Le(e)?He(e):new je([e,new Ie("x")])})),new Ee(e.children)):Le(e)?He(e):new je([e,new Ie("x")])}function Le(e){if(e.type===W.summation||e.type===W.power||e.type===W.product)for(var t=e.children.map((function(e){return Le(e)})),r=0;r<t.length;r++)if(t[r])return!0;return e.type===W.variable&&"x"===e.variable}function He(e){if(e.type===W.power){var t=e.children[0],r=e.children[1];if(t.type===W.variable&&"x"===t.variable)return new je([new ke([new Ee([new Ne(1),r]),new Ne(-1)]),new ke([t,new Ee([new Ne(1),r])])])}return e.type===W.variable&&"x"===e.variable?new je([new Ne(.5),new ke([e,new Ne(2)])]):e.type===W.product?new je(e.children.map((function(e){return He(e)}))):e}function Ue(e){return e.type!==W.summation&&e.type!==W.product&&e.type!==W.power||(e.children=e.children.map((function(e){return Ue(e)}))),e.type===W.product?function(e){for(var t=e.children,r=function(r){if(t[r-1].type===W.variable&&t[r].type===W.variable&&t[r-1].variable===t[r].variable){var n=ge.a.compact(e.children.map((function(e,t){return t===r-1?new ke([e,new Ne(2)]):t===r?void 0:e})));return{v:new je(n)}}if(t[r-1].type===W.variable&&t[r].type===W.power&&t[r-1].variable===t[r].children[0].variable){var i=ge.a.compact(e.children.map((function(e,n){return n===r-1?new ke([e,new Ee([new Ne(1),t[r].children[1]])]):n===r?void 0:e})));return{v:new je(i)}}if(t[r].type===W.variable&&t[r-1].type===W.power&&t[r].variable===t[r-1].children[0].variable){var a=ge.a.compact(e.children.map((function(e,n){return n===r?new ke([e,new Ee([new Ne(1),t[r-1].children[1]])]):n===r-1?void 0:e})));return{v:new je(a)}}},n=1;n<t.length;n++){var i=r(n);if("object"===typeof i)return i.v}return e}(e):e.type===W.summation?function(e){for(var t=e.children,r=function(r){if(t[r-1].type===W.variable&&t[r].type===W.variable&&t[r-1].variable===t[r].variable){var n=ge.a.compact(e.children.map((function(e,t){return t===r-1?new je([e,new Ne(2)]):t===r?void 0:e})));return{v:new Ee(n)}}if(t[r-1].type===W.variable&&t[r].type===W.product&&t[r-1].variable===t[r].children[0].variable){var i=ge.a.compact(e.children.map((function(e,n){return n===r-1?new je([e,new Ee([new Ne(1),t[r].children[1]])]):n===r?void 0:e})));return{v:new Ee(i)}}if(t[r].type===W.variable&&t[r-1].type===W.product&&t[r].variable===t[r-1].children[0].variable){var a=ge.a.compact(e.children.map((function(e,n){return n===r?new je([e,new Ee([new Ne(1),t[r-1].children[1]])]):n===r-1?void 0:e})));return{v:new Ee(a)}}},n=1;n<t.length;n++){var i=r(n);if("object"===typeof i)return i.v}return e}(e):e}function De(e){return e.type!==W.summation&&e.type!==W.product&&e.type!==W.power||(e.children=e.children.map((function(e){return De(e)}))),e.type===W.summation?function(e){var t=0,r=!0,n=!1,i=void 0;try{for(var a,c=e.children[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var o=a.value;o.type===W.number&&(t+=o.value)}}catch(u){n=!0,i=u}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}if(e.children=ge.a.compact(e.children.map((function(e){return e.type!==W.number?e:void 0}))),0===e.children.length)return new Ne(t);if(1===e.children.length&&0===t)return e.children[0];0!==t&&e.children.push(new Ne(t));return e}(e):e.type===W.product?function(e){var t=1,r=!0,n=!1,i=void 0;try{for(var a,c=e.children[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var o=a.value;o.type===W.number&&(t*=o.value)}}catch(u){n=!0,i=u}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}if(e.children=ge.a.compact(e.children.map((function(e){return e.type!==W.number?e:void 0}))),0===e.children.length)return new Ne(t);if(1===e.children.length&&1===t)return e.children[0];1!==t&&e.children.unshift(new Ne(t));return e}(e):e.type===W.power?function(e){if(e.children[0].type===W.number&&e.children[1].type===W.number)return new Ne(Math.pow(e.children[0].value,e.children[1].value));return e}(e):e}function Pe(e){return e.type!==W.summation&&e.type!==W.product&&e.type!==W.power||(e.children=e.children.map((function(e){return Pe(e)})),e.type!==W.summation&&e.type!==W.product||(e.children=e.children.sort((function(e,t){return Me(e,t)})))),e}function Me(e,t){return e.type===W.number&&t.type===W.number?function(e,t){return e.value<t.value?-1:e.value>t.value?1:0}(e,t):e.type===W.variable&&t.type===W.variable?function(e,t){return e.variable.localeCompare(t.variable)}(e,t):e.type===W.number?-1:t.type===W.number?1:e.type===W.variable?-1:t.type===W.variable?1:function(e,t){if(e.type===W.summation&&t.type===W.summation||e.type===W.product&&t.type===W.product)return Be(e,t);if(e.type===W.power&&t.type===W.power)return function(e,t){var r=Me(e.children[0],t.children[0]);return 0===r?Me(e.children[1],t.children[1]):r}(e,t);if(e.type===W.summation)return 1;if(t.type===W.summation)return-1;if(e.type===W.product)return Be(e,new je([t]));if(t.type===W.product)return Be(new je([e]),t);throw new Error("Fault in sorting algorithm")}(e,t)}function Be(e,t){for(var r=Me(e.children[e.children.length-1],t.children[t.children.length-1]),n=1;0===r;){if(!(n<e.children.length&&n<t.children.length))return e.children.length<t.children.length?-1:e.children.length>t.children.length?1:0;r=Me(e.children[e.children.length-n],t.children[t.children.length-n]),n++}return r}function Ve(e){return e.type===W.power?(e.children=e.children.map((function(e){return Ve(e)})),function(e){var t=e.children;if(t[0].type===W.power){var r=t[0];t[0]=r.children[0],t[1]=new je([r.children[1],t[1]])}if(t[0].type===W.product)return new je([new ke([t[0].children[0],t[1]]),new ke([t[0].children[1],t[1]])]);return e}(e)):e.type===W.product?(e.children=e.children.map((function(e){return Ve(e)})),function(e){for(var t=e.children,r=function(r){if(t[r-1].type===W.power&&t[r].type===W.power){var n=t[r-1].children,i=t[r].children;if(n[0].type===W.number&&i[0].type===W.number&&n[0].value===i[0].value)return 2===t.length?{v:new ke([n[0],new Ee([n[1],i[1]])])}:(e.children=ge.a.compact(e.children.map((function(e,t){return t===r?new ke([n[0],new Ee([n[1],i[1]])]):t===r-1?void 0:e}))),{v:e});if(n[0].type===W.variable&&i[0].type===W.variable&&n[0].variable===i[0].variable)return 2===t.length?{v:new ke([n[0],new Ee([n[1],i[1]])])}:(e.children=ge.a.compact(e.children.map((function(e,t){return t===r?new ke([n[0],new Ee([n[1],i[1]])]):t===r-1?void 0:e}))),{v:e})}},n=1;n<t.length;n++){var i=r(n);if("object"===typeof i)return i.v}return e}(e)):(e.type===W.summation&&(e.children=e.children.map((function(e){return Ve(e)}))),e)}function Fe(e){switch(e.type!==W.summation&&e.type!==W.product&&e.type!==W.power||(e.children=e.children.map((function(e){return Fe(e)}))),e.type){case W.summation:case W.product:return function(e){if(1===e.children.length)return e.children[0];return e}(e);default:return e}}function Ge(e){switch(e.type){case W.null:return;case W.number:case W.variable:return e;case W.symbol:return;case W.expression:return function(e){var t=Ge;if(e.children){if(1===e.children.length){var r=e.children[0];if(r.type===W.variable)return Ge(r);if(r.type===W.number)return Ge(r)}if(2===e.children.length){var n=e.children;return e.children=ge.a.compact([t(new Ne(0)),n[0],t(n[1])]),t(e)}if(3===e.children.length){var i=e.children;if(i[0].type===W.symbol)return Ge(i[1]);var a=i[1];if(a.type===W.symbol)switch(a.symbol){case"+":return t(new Ee(ge.a.compact([t(i[0]),t(i[2])])));case"-":return t(new Ee(ge.a.compact([t(e.children[0]),t(new je(ge.a.compact([t(new Ne(-1)),t(e.children[2])])))])));case"*":return Ge(new je(ge.a.compact([Ge(i[0]),Ge(i[2])])));case"/":return t(new je(ge.a.compact([t(e.children[0]),t(new ke(ge.a.compact([t(e.children[2]),t(new Ne(-1))])))])));case"^":return t(new ke(ge.a.compact([t(e.children[0]),t(e.children[2])])));default:return e}}}e.children&&(e.children=ge.a.compact(e.children.map((function(e){return Ge(e)}))));return e}(e);default:return e}}function We(e){var t;switch(Ae(e=Pe(e)),e.type!==W.summation&&e.type!==W.product&&e.type!==W.power||(e.children=e.children.map((function(e){return We(e)}))),e.type){case W.summation:t=function(e){var t=new Map,r=!0,n=!1,i=void 0;try{for(var a,c=e.children[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var o=a.value,u=new Ne(1),s=ge.a.cloneDeep(o);if(o.type===W.product&&o.children[0].type===W.number&&(u=ge.a.cloneDeep(o.children[0]),Ae(s=Fe(s=new je(s.children.slice(1))))),t.has(s.hash)){var l=t.get(s.hash);null===l||void 0===l||l.mul.children.push(u)}else t.set(s.hash,{node:ge.a.cloneDeep(s),mul:new Ee([u])})}}catch(h){n=!0,i=h}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}var p=[];return t.forEach((function(e){1===e.mul.children.length?e.mul.children[0].type===W.number&&1===e.mul.children[0].value?p.push(e.node):p.push(new je([e.mul.children[0],e.node])):p.push(new je([e.mul,e.node]))})),new Ee(p)}(e);break;case W.product:t=function(e){var t=new Map,r=!0,n=!1,i=void 0;try{for(var a,c=e.children[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var o=a.value,u=new Ne(1),s=ge.a.cloneDeep(o);if(o.type===W.power&&(s=ge.a.cloneDeep(o.children[0]),u=ge.a.cloneDeep(o.children[1]),Ae(s)),t.has(s.hash)){var l=t.get(s.hash);null===l||void 0===l||l.exp.children.push(u)}else t.set(s.hash,{node:ge.a.cloneDeep(s),exp:new Ee([u])})}}catch(h){n=!0,i=h}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}var p=[];return t.forEach((function(e){1===e.exp.children.length?e.exp.children[0].type===W.number&&1===e.exp.children[0].value?p.push(e.node):p.push(new ke([e.node,e.exp.children[0]])):p.push(new ke([e.node,e.exp]))})),new je(p)}(e);break;default:t=e}return Ae(t=Pe(t=Fe(t))),t}function ze(e,t){var r=[];switch(e.type!==W.summation&&e.type!==W.product&&e.type!==W.power||(e.children=e.children.map((function(e){var n=ze(e,t);return r.push(n.flag),n.node}))),e.type){case W.number:return{node:e,flag:"constant"};case W.variable:return{node:e,flag:e.variable===t?"term":"constant"};case W.power:return"constant"===r[0]&&"constant"===r[1]?{node:e,flag:"constant"}:"term"===r[0]&&"constant"===r[1]?{node:e,flag:"term"}:"poly"===r[0]&&"constant"===r[1]&&(e=function e(t){if(t.type!==W.summation&&t.type!==W.product&&t.type!==W.power||(t.children=t.children.map((function(t){return e(t)}))),t.type===W.power){var r=t.children[0],n=t.children[1];if(n.type===W.number&&Number.isInteger(n.value)&&n.value>1){for(var i=new je([]),a=0;a<n.value;a++)i.children.push(ge.a.cloneDeep(r));return i}}return t}(e)).type===W.product?ze(e,t):{node:e,flag:"nonpoly"};case W.product:if(r.some((function(t,r){return"nonpoly"===t||"poly"===t&&e.children[r].type!==W.summation})))return{node:e,flag:"nonpoly"};var n,i=e.children.filter((function(e,t){return"constant"===r[t]})),a=e.children.filter((function(e,t){return"term"===r[t]}));a.length>0&&(n=function(e){if(1===e.length)return e[0];var t=new je(e);return t=We(t)}(a));var c,o=e.children.filter((function(e,t){return e.type===W.summation&&"poly"===r[t]}));return o.length>0&&(c=function e(t){return 1===t.length?t[0]:new Ee(ge.a.flatten(t[0].children.map((function(r){return e(t.slice(1)).children.map((function(e){return new je([r,e])}))}))))}([].concat(Object(pe.a)(o),Object(pe.a)(n?[new Ee([n])]:[])))),c?{node:ze(e=function(e,t){return new Ee(t.children.map((function(t){return t.type===W.product?(t.children=[].concat(Object(pe.a)(e),Object(pe.a)(t.children)),t):0===e.length?t:new je([].concat(Object(pe.a)(e),[t]))})))}(i,c),t).node,flag:"poly"}:n?(e.children=[].concat(Object(pe.a)(i),[n]),{node:e,flag:"term"}):{node:e,flag:"constant"};case W.summation:if(r.some((function(e){return"nonpoly"===e})))return{node:e,flag:"nonpoly"};if(r.every((function(e){return"constant"===e})))return{node:e,flag:"constant"};if(r.every((function(e){return"term"===e||"constant"===e})))return{node:e,flag:"poly"};var u=e.children.filter((function(e,t){return"constant"===r[t]||"term"===r[t]})),s=e.children.filter((function(e,t){return"poly"===r[t]&&e.type===W.summation}));return e.children=[].concat(Object(pe.a)(u),Object(pe.a)(ge.a.flatten(s.map((function(e){return e.children}))))),{node:e,flag:"poly"};default:throw new Error("Cannot convert to polynomial")}}var Qe=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(h.a)(this,Object(d.a)(t).call(this,W.null))).type=W.null,e}return Object(f.a)(t,e),t}(ie);function Ye(e){return e.type!==W.summation&&e.type!==W.product&&e.type!==W.power||(e.children=e.children.map((function(e){return Ye(e)}))),e.type===W.product?function(e){for(var t=0;t<e.children.length;t++)if(e.children[t].type===W.null)return new Qe;return e}(e):e.type===W.power?function(e){var t=e.children[0],r=e.children[1],n=De(t),i=De(r);if(n.type===W.number&&i.type===W.number){if(0===n.value&&i.value<0)return new Qe;if(n.value<0&&1/i.value%2===0)return new Qe}for(var a=0;a<e.children.length;a++)if(e.children[a].type===W.null)return new Qe;return e}(e):e.type===W.summation?function(e){for(var t=0;t<e.children.length;t++)if(e.children[t].type===W.null)return new Qe;return e}(e):e}var Je,Ke=r(130);!function(e){e[e.ERROR=0]="ERROR",e[e.WARNING=1]="WARNING"}(Je||(Je={}));var qe=function(){function e(){Object(l.a)(this,e),this.errors=[]}return Object(p.a)(e,[{key:"addError",value:function(e){this.errors.push(e)}},{key:"syntaxError",value:function(e,t,r,n,i,a){t&&t.text&&(")"===t.text?this.errors.push({end:n+t.text.length,level:Je.ERROR,line:r-1,message:"Expecting arguments before symbol )",start:n}):this.errors.push({end:n+t.text.length,level:Je.ERROR,line:r-1,message:i,start:n}))}}]),e}(),$e=r(68),Xe=r(67),Ze=r(42),et=r(77),tt=r(40),rt=r(34),nt=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(d.a)(t).call(this,e)))._interp=new et.LexerATNSimulator(t._ATN,Object($e.a)(r)),r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"vocabulary",get:function(){return t.VOCABULARY}}]),Object(p.a)(t,[{key:"grammarFileName",get:function(){return"Expression.g4"}},{key:"ruleNames",get:function(){return t.ruleNames}},{key:"serializedATN",get:function(){return t._serializedATN}},{key:"channelNames",get:function(){return t.channelNames}},{key:"modeNames",get:function(){return t.modeNames}}],[{key:"_ATN",get:function(){return t.__ATN||(t.__ATN=(new Xe.ATNDeserializer).deserialize(rt.toCharArray(t._serializedATN))),t.__ATN}}]),t}(Ze.Lexer);nt.VARIABLE=1,nt.SCIENTIFIC_NUMBER=2,nt.LPAREN=3,nt.RPAREN=4,nt.PLUS=5,nt.MINUS=6,nt.TIMES=7,nt.DIV=8,nt.GT=9,nt.LT=10,nt.EQ=11,nt.POINT=12,nt.POW=13,nt.WS=14,nt.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"],nt.modeNames=["DEFAULT_MODE"],nt.ruleNames=["VARIABLE","VALID_ID_START","VALID_ID_CHAR","SCIENTIFIC_NUMBER","NUMBER","UNSIGNED_INTEGER","E","SIGN","LPAREN","RPAREN","PLUS","MINUS","TIMES","DIV","GT","LT","EQ","POINT","POW","WS"],nt._LITERAL_NAMES=[void 0,void 0,void 0,"'('","')'","'+'","'-'","'*'","'/'","'>'","'<'","'='","'.'","'^'"],nt._SYMBOLIC_NAMES=[void 0,"VARIABLE","SCIENTIFIC_NUMBER","LPAREN","RPAREN","PLUS","MINUS","TIMES","DIV","GT","LT","EQ","POINT","POW","WS"],nt.VOCABULARY=new tt.VocabularyImpl(nt._LITERAL_NAMES,nt._SYMBOLIC_NAMES,[]),nt._serializedATN="\x03\uc91d\ucaba\u058d\uafba\u4f53\u0607\uea8b\uc241\x02\x10u\b\x01\x04\x02\t\x02\x04\x03\t\x03\x04\x04\t\x04\x04\x05\t\x05\x04\x06\t\x06\x04\x07\t\x07\x04\b\t\b\x04\t\t\t\x04\n\t\n\x04\v\t\v\x04\f\t\f\x04\r\t\r\x04\x0e\t\x0e\x04\x0f\t\x0f\x04\x10\t\x10\x04\x11\t\x11\x04\x12\t\x12\x04\x13\t\x13\x04\x14\t\x14\x04\x15\t\x15\x03\x02\x03\x02\x07\x02.\n\x02\f\x02\x0e\x021\v\x02\x03\x03\x05\x034\n\x03\x03\x04\x03\x04\x05\x048\n\x04\x03\x05\x03\x05\x03\x05\x05\x05=\n\x05\x03\x05\x03\x05\x05\x05A\n\x05\x03\x06\x06\x06D\n\x06\r\x06\x0e\x06E\x03\x06\x03\x06\x06\x06J\n\x06\r\x06\x0e\x06K\x05\x06N\n\x06\x03\x07\x06\x07Q\n\x07\r\x07\x0e\x07R\x03\b\x03\b\x03\t\x03\t\x03\n\x03\n\x03\v\x03\v\x03\f\x03\f\x03\r\x03\r\x03\x0e\x03\x0e\x03\x0f\x03\x0f\x03\x10\x03\x10\x03\x11\x03\x11\x03\x12\x03\x12\x03\x13\x03\x13\x03\x14\x03\x14\x03\x15\x06\x15p\n\x15\r\x15\x0e\x15q\x03\x15\x03\x15\x02\x02\x02\x16\x03\x02\x03\x05\x02\x02\x07\x02\x02\t\x02\x04\v\x02\x02\r\x02\x02\x0f\x02\x02\x11\x02\x02\x13\x02\x05\x15\x02\x06\x17\x02\x07\x19\x02\b\x1b\x02\t\x1d\x02\n\x1f\x02\v!\x02\f#\x02\r%\x02\x0e'\x02\x0f)\x02\x10\x03\x02\x06\x05\x02C\\aac|\x04\x02GGgg\x04\x02--//\x05\x02\v\f\x0f\x0f\"\"\x02w\x02\x03\x03\x02\x02\x02\x02\t\x03\x02\x02\x02\x02\x13\x03\x02\x02\x02\x02\x15\x03\x02\x02\x02\x02\x17\x03\x02\x02\x02\x02\x19\x03\x02\x02\x02\x02\x1b\x03\x02\x02\x02\x02\x1d\x03\x02\x02\x02\x02\x1f\x03\x02\x02\x02\x02!\x03\x02\x02\x02\x02#\x03\x02\x02\x02\x02%\x03\x02\x02\x02\x02'\x03\x02\x02\x02\x02)\x03\x02\x02\x02\x03+\x03\x02\x02\x02\x053\x03\x02\x02\x02\x077\x03\x02\x02\x02\t9\x03\x02\x02\x02\vC\x03\x02\x02\x02\rP\x03\x02\x02\x02\x0fT\x03\x02\x02\x02\x11V\x03\x02\x02\x02\x13X\x03\x02\x02\x02\x15Z\x03\x02\x02\x02\x17\\\x03\x02\x02\x02\x19^\x03\x02\x02\x02\x1b`\x03\x02\x02\x02\x1db\x03\x02\x02\x02\x1fd\x03\x02\x02\x02!f\x03\x02\x02\x02#h\x03\x02\x02\x02%j\x03\x02\x02\x02'l\x03\x02\x02\x02)o\x03\x02\x02\x02+/\x05\x05\x03\x02,.\x05\x07\x04\x02-,\x03\x02\x02\x02.1\x03\x02\x02\x02/-\x03\x02\x02\x02/0\x03\x02\x02\x020\x04\x03\x02\x02\x021/\x03\x02\x02\x0224\t\x02\x02\x0232\x03\x02\x02\x024\x06\x03\x02\x02\x0258\x05\x05\x03\x0268\x042;\x0275\x03\x02\x02\x0276\x03\x02\x02\x028\b\x03\x02\x02\x029@\x05\v\x06\x02:<\x05\x0f\b\x02;=\x05\x11\t\x02<;\x03\x02\x02\x02<=\x03\x02\x02\x02=>\x03\x02\x02\x02>?\x05\r\x07\x02?A\x03\x02\x02\x02@:\x03\x02\x02\x02@A\x03\x02\x02\x02A\n\x03\x02\x02\x02BD\x042;\x02CB\x03\x02\x02\x02DE\x03\x02\x02\x02EC\x03\x02\x02\x02EF\x03\x02\x02\x02FM\x03\x02\x02\x02GI\x070\x02\x02HJ\x042;\x02IH\x03\x02\x02\x02JK\x03\x02\x02\x02KI\x03\x02\x02\x02KL\x03\x02\x02\x02LN\x03\x02\x02\x02MG\x03\x02\x02\x02MN\x03\x02\x02\x02N\f\x03\x02\x02\x02OQ\x042;\x02PO\x03\x02\x02\x02QR\x03\x02\x02\x02RP\x03\x02\x02\x02RS\x03\x02\x02\x02S\x0e\x03\x02\x02\x02TU\t\x03\x02\x02U\x10\x03\x02\x02\x02VW\t\x04\x02\x02W\x12\x03\x02\x02\x02XY\x07*\x02\x02Y\x14\x03\x02\x02\x02Z[\x07+\x02\x02[\x16\x03\x02\x02\x02\\]\x07-\x02\x02]\x18\x03\x02\x02\x02^_\x07/\x02\x02_\x1a\x03\x02\x02\x02`a\x07,\x02\x02a\x1c\x03\x02\x02\x02bc\x071\x02\x02c\x1e\x03\x02\x02\x02de\x07@\x02\x02e \x03\x02\x02\x02fg\x07>\x02\x02g\"\x03\x02\x02\x02hi\x07?\x02\x02i$\x03\x02\x02\x02jk\x070\x02\x02k&\x03\x02\x02\x02lm\x07`\x02\x02m(\x03\x02\x02\x02np\t\x05\x02\x02on\x03\x02\x02\x02pq\x03\x02\x02\x02qo\x03\x02\x02\x02qr\x03\x02\x02\x02rs\x03\x02\x02\x02st\b\x15\x02\x02t*\x03\x02\x02\x02\r\x02/37<@EKMRq\x03\b\x02\x02",nt.__ATN=void 0;var it=r(38),at=r(57),ct=r(66),ot=r(64),ut=r(30),st=r(65),lt=r(32),pt=r(21),ht=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(d.a)(t).call(this,e)))._interp=new st.ParserATNSimulator(t._ATN,Object($e.a)(r)),r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"vocabulary",get:function(){return t.VOCABULARY}},{key:"grammarFileName",get:function(){return"Expression.g4"}},{key:"ruleNames",get:function(){return t.ruleNames}},{key:"serializedATN",get:function(){return t._serializedATN}}]),Object(p.a)(t,[{key:"file",value:function(){var e=new ft(this._ctx,this.state);this.enterRule(e,0,t.RULE_file);try{this.enterOuterAlt(e,1),this.state=12,this.expression(0),this.state=13,this.match(t.EOF)}catch(r){if(!(r instanceof lt.RecognitionException))throw r;e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r)}finally{this.exitRule()}return e}},{key:"expression",value:function(e){void 0===e&&(e=0);var r,n=this._ctx,i=this.state,a=new vt(this._ctx,i);this.enterRecursionRule(a,2,t.RULE_expression,e);try{var c;switch(this.enterOuterAlt(a,1),this.state=24,this._errHandler.sync(this),this._input.LA(1)){case t.LPAREN:this.state=16,this.match(t.LPAREN),this.state=17,this.expression(0),this.state=18,this.match(t.RPAREN);break;case t.PLUS:this.state=20,this.match(t.PLUS);break;case t.MINUS:this.state=21,this.match(t.MINUS),this.state=22,this.atom();break;case t.VARIABLE:case t.SCIENTIFIC_NUMBER:this.state=23,this.atom();break;default:throw new ct.NoViableAltException(this)}for(this._ctx._stop=this._input.tryLT(-1),this.state=37,this._errHandler.sync(this),c=this.interpreter.adaptivePredict(this._input,2,this._ctx);2!==c&&c!==it.ATN.INVALID_ALT_NUMBER;){if(1===c)switch(null!=this._parseListeners&&this.triggerExitRuleEvent(),a,this.state=35,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,1,this._ctx)){case 1:if(a=new vt(n,i),this.pushNewRecursionContext(a,2,t.RULE_expression),this.state=26,!this.precpred(this._ctx,7))throw new at.FailedPredicateException(this,"this.precpred(this._ctx, 7)");this.state=27,this.match(t.POW),this.state=28,this.expression(8);break;case 2:if(a=new vt(n,i),this.pushNewRecursionContext(a,2,t.RULE_expression),this.state=29,!this.precpred(this._ctx,6))throw new at.FailedPredicateException(this,"this.precpred(this._ctx, 6)");this.state=30,(r=this._input.LA(1))!==t.TIMES&&r!==t.DIV?this._errHandler.recoverInline(this):(this._input.LA(1)===pt.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()),this.state=31,this.expression(7);break;case 3:if(a=new vt(n,i),this.pushNewRecursionContext(a,2,t.RULE_expression),this.state=32,!this.precpred(this._ctx,5))throw new at.FailedPredicateException(this,"this.precpred(this._ctx, 5)");this.state=33,(r=this._input.LA(1))!==t.PLUS&&r!==t.MINUS?this._errHandler.recoverInline(this):(this._input.LA(1)===pt.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()),this.state=34,this.expression(6)}this.state=39,this._errHandler.sync(this),c=this.interpreter.adaptivePredict(this._input,2,this._ctx)}}catch(o){if(!(o instanceof lt.RecognitionException))throw o;a.exception=o,this._errHandler.reportError(this,o),this._errHandler.recover(this,o)}finally{this.unrollRecursionContexts(n)}return a}},{key:"atom",value:function(){var e=new yt(this._ctx,this.state);this.enterRule(e,4,t.RULE_atom);try{switch(this.state=42,this._errHandler.sync(this),this._input.LA(1)){case t.SCIENTIFIC_NUMBER:this.enterOuterAlt(e,1),this.state=40,this.scientific();break;case t.VARIABLE:this.enterOuterAlt(e,2),this.state=41,this.variable();break;default:throw new ct.NoViableAltException(this)}}catch(r){if(!(r instanceof lt.RecognitionException))throw r;e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r)}finally{this.exitRule()}return e}},{key:"scientific",value:function(){var e=new mt(this._ctx,this.state);this.enterRule(e,6,t.RULE_scientific);try{this.enterOuterAlt(e,1),this.state=44,this.match(t.SCIENTIFIC_NUMBER)}catch(r){if(!(r instanceof lt.RecognitionException))throw r;e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r)}finally{this.exitRule()}return e}},{key:"variable",value:function(){var e=new bt(this._ctx,this.state);this.enterRule(e,8,t.RULE_variable);try{this.enterOuterAlt(e,1),this.state=46,this.match(t.VARIABLE)}catch(r){if(!(r instanceof lt.RecognitionException))throw r;e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r)}finally{this.exitRule()}return e}},{key:"relop",value:function(){var e,r=new wt(this._ctx,this.state);this.enterRule(r,10,t.RULE_relop);try{this.enterOuterAlt(r,1),this.state=48,0!==(-32&(e=this._input.LA(1)))||0===(1<<e&(1<<t.GT|1<<t.LT|1<<t.EQ))?this._errHandler.recoverInline(this):(this._input.LA(1)===pt.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(n){if(!(n instanceof lt.RecognitionException))throw n;r.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n)}finally{this.exitRule()}return r}},{key:"sempred",value:function(e,t,r){switch(t){case 1:return this.expression_sempred(e,r)}return!0}},{key:"expression_sempred",value:function(e,t){switch(t){case 0:return this.precpred(this._ctx,7);case 1:return this.precpred(this._ctx,6);case 2:return this.precpred(this._ctx,5)}return!0}}],[{key:"_ATN",get:function(){return t.__ATN||(t.__ATN=(new Xe.ATNDeserializer).deserialize(rt.toCharArray(t._serializedATN))),t.__ATN}}]),t}(ot.Parser);ht.VARIABLE=1,ht.SCIENTIFIC_NUMBER=2,ht.LPAREN=3,ht.RPAREN=4,ht.PLUS=5,ht.MINUS=6,ht.TIMES=7,ht.DIV=8,ht.GT=9,ht.LT=10,ht.EQ=11,ht.POINT=12,ht.POW=13,ht.WS=14,ht.RULE_file=0,ht.RULE_expression=1,ht.RULE_atom=2,ht.RULE_scientific=3,ht.RULE_variable=4,ht.RULE_relop=5,ht.ruleNames=["file","expression","atom","scientific","variable","relop"],ht._LITERAL_NAMES=[void 0,void 0,void 0,"'('","')'","'+'","'-'","'*'","'/'","'>'","'<'","'='","'.'","'^'"],ht._SYMBOLIC_NAMES=[void 0,"VARIABLE","SCIENTIFIC_NUMBER","LPAREN","RPAREN","PLUS","MINUS","TIMES","DIV","GT","LT","EQ","POINT","POW","WS"],ht.VOCABULARY=new tt.VocabularyImpl(ht._LITERAL_NAMES,ht._SYMBOLIC_NAMES,[]),ht._serializedATN="\x03\uc91d\ucaba\u058d\uafba\u4f53\u0607\uea8b\uc241\x03\x105\x04\x02\t\x02\x04\x03\t\x03\x04\x04\t\x04\x04\x05\t\x05\x04\x06\t\x06\x04\x07\t\x07\x03\x02\x03\x02\x03\x02\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x05\x03\x1b\n\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x07\x03&\n\x03\f\x03\x0e\x03)\v\x03\x03\x04\x03\x04\x05\x04-\n\x04\x03\x05\x03\x05\x03\x06\x03\x06\x03\x07\x03\x07\x03\x07\x02\x02\x03\x04\b\x02\x02\x04\x02\x06\x02\b\x02\n\x02\f\x02\x02\x05\x03\x02\t\n\x03\x02\x07\b\x03\x02\v\r\x025\x02\x0e\x03\x02\x02\x02\x04\x1a\x03\x02\x02\x02\x06,\x03\x02\x02\x02\b.\x03\x02\x02\x02\n0\x03\x02\x02\x02\f2\x03\x02\x02\x02\x0e\x0f\x05\x04\x03\x02\x0f\x10\x07\x02\x02\x03\x10\x03\x03\x02\x02\x02\x11\x12\b\x03\x01\x02\x12\x13\x07\x05\x02\x02\x13\x14\x05\x04\x03\x02\x14\x15\x07\x06\x02\x02\x15\x1b\x03\x02\x02\x02\x16\x1b\x07\x07\x02\x02\x17\x18\x07\b\x02\x02\x18\x1b\x05\x06\x04\x02\x19\x1b\x05\x06\x04\x02\x1a\x11\x03\x02\x02\x02\x1a\x16\x03\x02\x02\x02\x1a\x17\x03\x02\x02\x02\x1a\x19\x03\x02\x02\x02\x1b'\x03\x02\x02\x02\x1c\x1d\f\t\x02\x02\x1d\x1e\x07\x0f\x02\x02\x1e&\x05\x04\x03\n\x1f \f\b\x02\x02 !\t\x02\x02\x02!&\x05\x04\x03\t\"#\f\x07\x02\x02#$\t\x03\x02\x02$&\x05\x04\x03\b%\x1c\x03\x02\x02\x02%\x1f\x03\x02\x02\x02%\"\x03\x02\x02\x02&)\x03\x02\x02\x02'%\x03\x02\x02\x02'(\x03\x02\x02\x02(\x05\x03\x02\x02\x02)'\x03\x02\x02\x02*-\x05\b\x05\x02+-\x05\n\x06\x02,*\x03\x02\x02\x02,+\x03\x02\x02\x02-\x07\x03\x02\x02\x02./\x07\x04\x02\x02/\t\x03\x02\x02\x0201\x07\x03\x02\x021\v\x03\x02\x02\x0223\t\x04\x02\x023\r\x03\x02\x02\x02\x06\x1a%',",ht.__ATN=void 0;var dt,ft=function(e){function t(e,r){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).call(this,e,r))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"expression",value:function(){return this.getRuleContext(0,vt)}},{key:"EOF",value:function(){return this.getToken(ht.EOF,0)}}]),Object(p.a)(t,[{key:"enterRule",value:function(e){e.enterFile&&e.enterFile(this)}},{key:"exitRule",value:function(e){e.exitFile&&e.exitFile(this)}},{key:"accept",value:function(e){return e.visitFile?e.visitFile(this):e.visitChildren(this)}},{key:"ruleIndex",get:function(){return ht.RULE_file}}]),t}(ut.ParserRuleContext),vt=function(e){function t(e,r){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).call(this,e,r))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"expression",value:function(e){return void 0===e?this.getRuleContexts(t):this.getRuleContext(e,t)}},{key:"POW",value:function(){return this.tryGetToken(ht.POW,0)}},{key:"TIMES",value:function(){return this.tryGetToken(ht.TIMES,0)}},{key:"DIV",value:function(){return this.tryGetToken(ht.DIV,0)}},{key:"PLUS",value:function(){return this.tryGetToken(ht.PLUS,0)}},{key:"MINUS",value:function(){return this.tryGetToken(ht.MINUS,0)}},{key:"LPAREN",value:function(){return this.tryGetToken(ht.LPAREN,0)}},{key:"RPAREN",value:function(){return this.tryGetToken(ht.RPAREN,0)}},{key:"atom",value:function(){return this.tryGetRuleContext(0,yt)}}]),Object(p.a)(t,[{key:"enterRule",value:function(e){e.enterExpression&&e.enterExpression(this)}},{key:"exitRule",value:function(e){e.exitExpression&&e.exitExpression(this)}},{key:"accept",value:function(e){return e.visitExpression?e.visitExpression(this):e.visitChildren(this)}},{key:"ruleIndex",get:function(){return ht.RULE_expression}}]),t}(ut.ParserRuleContext),yt=function(e){function t(e,r){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).call(this,e,r))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"scientific",value:function(){return this.tryGetRuleContext(0,mt)}},{key:"variable",value:function(){return this.tryGetRuleContext(0,bt)}}]),Object(p.a)(t,[{key:"enterRule",value:function(e){e.enterAtom&&e.enterAtom(this)}},{key:"exitRule",value:function(e){e.exitAtom&&e.exitAtom(this)}},{key:"accept",value:function(e){return e.visitAtom?e.visitAtom(this):e.visitChildren(this)}},{key:"ruleIndex",get:function(){return ht.RULE_atom}}]),t}(ut.ParserRuleContext),mt=function(e){function t(e,r){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).call(this,e,r))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"SCIENTIFIC_NUMBER",value:function(){return this.getToken(ht.SCIENTIFIC_NUMBER,0)}}]),Object(p.a)(t,[{key:"enterRule",value:function(e){e.enterScientific&&e.enterScientific(this)}},{key:"exitRule",value:function(e){e.exitScientific&&e.exitScientific(this)}},{key:"accept",value:function(e){return e.visitScientific?e.visitScientific(this):e.visitChildren(this)}},{key:"ruleIndex",get:function(){return ht.RULE_scientific}}]),t}(ut.ParserRuleContext),bt=function(e){function t(e,r){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).call(this,e,r))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"VARIABLE",value:function(){return this.getToken(ht.VARIABLE,0)}}]),Object(p.a)(t,[{key:"enterRule",value:function(e){e.enterVariable&&e.enterVariable(this)}},{key:"exitRule",value:function(e){e.exitVariable&&e.exitVariable(this)}},{key:"accept",value:function(e){return e.visitVariable?e.visitVariable(this):e.visitChildren(this)}},{key:"ruleIndex",get:function(){return ht.RULE_variable}}]),t}(ut.ParserRuleContext),wt=function(e){function t(e,r){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).call(this,e,r))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"EQ",value:function(){return this.tryGetToken(ht.EQ,0)}},{key:"GT",value:function(){return this.tryGetToken(ht.GT,0)}},{key:"LT",value:function(){return this.tryGetToken(ht.LT,0)}}]),Object(p.a)(t,[{key:"enterRule",value:function(e){e.enterRelop&&e.enterRelop(this)}},{key:"exitRule",value:function(e){e.exitRelop&&e.exitRelop(this)}},{key:"accept",value:function(e){return e.visitRelop?e.visitRelop(this):e.visitChildren(this)}},{key:"ruleIndex",get:function(){return ht.RULE_relop}}]),t}(ut.ParserRuleContext),xt=r(81),gt=r(173);!function(e){e.id="id",e.plus="+",e.minus="-",e.mul="*",e.div="/",e.pow="^"}(dt||(dt={}));var Ot=function(e){function t(e,r){var n;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this,W.expression))).operator=void 0,n.type=W.expression,n.children=void 0,n.children=r,n.operator=e,n}return Object(f.a)(t,e),t}(ie),jt=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(d.a)(t).call(this,W.symbol))).symbol=void 0,r.type=W.symbol,r.symbol=e,r.name=e,r}return Object(f.a)(t,e),t}(ie),Et=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"defaultResult",value:function(){return[]}},{key:"aggregateResult",value:function(e,t){return[].concat(Object(pe.a)(e),Object(pe.a)(t))}},{key:"visitVariable",value:function(e){return[new Ie(e.text)]}},{key:"visitScientific",value:function(e){return[new Ne(parseFloat(e.text))]}},{key:"visitAtom",value:function(e){return Object(xt.a)(Object(d.a)(t.prototype),"visitChildren",this).call(this,e)}},{key:"visitExpression",value:function(e){var r=Object(xt.a)(Object(d.a)(t.prototype),"visitChildren",this).call(this,e);return[new Ot(dt.id,r)]}},{key:"visitFile",value:function(e){return Object(xt.a)(Object(d.a)(t.prototype),"visitChildren",this).call(this,e)}},{key:"visitRelop",value:function(e){return Object(xt.a)(Object(d.a)(t.prototype),"visitChildren",this).call(this,e)}},{key:"visitTerminal",value:function(e){return e.symbol.text?[new jt(e.symbol.text)]:[]}}]),t}(gt.AbstractParseTreeVisitor),Rt=function(){function e(t){Object(l.a)(this,e),this._tree=void 0,this._parser=void 0,this._lexer=void 0,this._errorListener=void 0,this._errorListener=new qe;var r=new Ke.ANTLRInputStream(t);this._lexer=new nt(r);var n=new Ke.CommonTokenStream(this._lexer);if(this._parser=new ht(n),this._parser.addErrorListener(this._errorListener),this._tree=this._parser.file(),this._errorListener.errors.length>0)throw this._errorListener.errors}return Object(p.a)(e,[{key:"toString",value:function(){return this._tree.toStringTree(this._parser.ruleNames)}},{key:"getTree",value:function(){return(new Et).visit(this._tree)}},{key:"getRuleNames",value:function(){return this._parser.ruleNames}}]),e}();function Nt(e){var t=e.split(" ");switch(t[0]){case"/clear":return yr.dispatch(V()),void yr.dispatch({type:n.ClearHistory});case"/parse":try{var r=new Rt(t.slice(1).join(" "));return yr.dispatch(x(r.getTree(),r.getRuleNames())),{output:"parsed: "+r.toString()}}catch(rt){return{output:"",error:rt.map((function(e){return e.message})).join("\n")}}case"/p":try{var i=new Rt(t.slice(1).join(" ")),a=Ge(i.getTree()[0]);return a&&yr.dispatch(x([a],i.getRuleNames())),{output:"parsed: "+i.toString()}}catch(rt){return{output:"",error:rt.map((function(e){return e.message})).join("\n")}}case"/d":var c=ge.a.cloneDeep(N(yr.getState()));if(c){var o=_e(c.tree[0]);return o&&yr.dispatch(x([o],c.ruleNames)),{output:"Result: "+ae(o)}}return{output:"",error:"Nothing to apply rule to"};case"/simplify":var u=ge.a.cloneDeep(N(yr.getState()));if(u){var s=Ge(u.tree[0]);return s&&yr.dispatch(x([s],u.ruleNames)),{output:"Simplified to: "+ae(s)}}return{output:"",error:"Nothing to simplify"};case"/associative":var l=ge.a.cloneDeep(N(yr.getState()));if(l){var p=Oe(l.tree[0]);return p&&yr.dispatch(x([p],l.ruleNames)),{output:"Result: "+ae(p)}}return{output:"",error:"Nothing to apply rule to"};case"/identity":var h=ge.a.cloneDeep(N(yr.getState()));if(h){var d=Se(h.tree[0]);return d&&yr.dispatch(x([d],h.ruleNames)),{output:"Result: "+ae(d)}}return{output:"",error:"Nothing to apply rule to"};case"/power":var f=ge.a.cloneDeep(N(yr.getState()));if(f){var v=Ve(f.tree[0]);return v&&yr.dispatch(x([v],f.ruleNames)),{output:"Result: "+ae(v)}}return{output:"",error:"Nothing to apply rule to"};case"/brackets":var y=ge.a.cloneDeep(N(yr.getState()));if(y){var m=Re(y.tree[0]);return m&&yr.dispatch(x([m],y.ruleNames)),{output:"Result: "+ae(m)}}return{output:"",error:"Nothing to apply rule to"};case"/defined":var b=ge.a.cloneDeep(N(yr.getState())),w=ge.a.cloneDeep(N(yr.getState()));return b&&w?Ye(w.tree[0]).type===W.null?{output:"Result: the expression is undefined"}:{output:"Result: "+ae(b.tree[0])}:{output:"",error:"Nothing to apply rule to"};case"/numerical":var g=ge.a.cloneDeep(N(yr.getState()));if(g){var O=De(g.tree[0]);return O&&yr.dispatch(x([O],g.ruleNames)),{output:"Result: "+ae(O)}}return{output:"",error:"Nothing to apply rule to"};case"/order":var j=ge.a.cloneDeep(N(yr.getState()));if(j){var E=Pe(j.tree[0]);return E&&yr.dispatch(x([E],j.ruleNames)),{output:"Result: "+ae(E)}}return{output:"",error:"Nothing to apply rule to"};case"/likeTerms":var R=ge.a.cloneDeep(N(yr.getState()));if(R){var k=Ue(R.tree[0]);return k&&yr.dispatch(x([k],R.ruleNames)),{output:"Result: "+ae(k)}}return{output:"",error:"Nothing to apply rule to"};case"/powRed":var _=ge.a.cloneDeep(N(yr.getState()));if(_){var I=function e(t){return t.type!==W.summation&&t.type!==W.product&&t.type!==W.power||(t.children=t.children.map((function(t){return e(t)}))),t.type===W.power&&t.children[1].type===W.number&&Number.isInteger(t.children[1].value)&&t.children[1].value>1?t.children[0].type===W.variable&&"x"===t.children[0].variable?t:new je([t.children[0],new ke([t.children[0],new Ne(t.children[1].value-1)])]):t}(_.tree[0]);return I&&yr.dispatch(x([I],_.ruleNames)),{output:"Result: "+ae(I)}}return{output:"",error:"Nothing to apply rule to"};case"/int":var T=ge.a.cloneDeep(N(yr.getState()));if(T){var A=Ce(T.tree[0]);return A&&yr.dispatch(x([A],T.ruleNames)),{output:"Result: "+ae(A)}}return{output:"",error:"Nothing to apply rule to"};case"/model1":try{var S=new Rt(t.slice(1).join(" "));yr.dispatch(x(S.getTree(),S.getRuleNames()));var C=ge.a.cloneDeep(yr.dispatch(x(S.getTree(),S.getRuleNames())));if(C){var L=Ge(C.tree[0]);L&&yr.dispatch(x([L],C.ruleNames));for(var H=ge.a.cloneDeep(L),U=ge.a.cloneDeep(L),D=0;D<100;D++){if(U&&Ye(U).type===W.null)return{output:"Result: the expression is undefined"};H&&(H=De(H=Ue(H=Re(H=Ve(H=Se(H=Oe(H)))))))}return{output:"Result: "+ae(H)}}return{output:"",error:"Nothing to apply rule to"}}catch(rt){return{output:"",error:rt.map((function(e){return e.message})).join("\n")}}case"/model2":try{var P=new Rt(t.slice(1).join(" ")),M=Ge(P.getTree()[0]);if(M){var F;for(Ae(M=Pe(M));F!==(null===(G=M)||void 0===G?void 0:G.hash);){var G,z,Q=ge.a.cloneDeep(M);if(Q&&Ye(Q).type===W.null)return{output:"Result: the expression is undefined"};F=null===(z=M)||void 0===z?void 0:z.hash,Ae(M=Pe(M=Fe(M=We(M=Ve(M=De(M=Se(M=Oe(M))))))))}for(F=void 0,Ae(M=Pe(M));F!==(null===(Y=M)||void 0===Y?void 0:Y.hash);){var Y,J;F=null===(J=M)||void 0===J?void 0:J.hash,Ae(M=Pe(M=Ve(M=De(M=Se(M=Oe(M))))))}return M&&yr.dispatch(x([ge.a.cloneDeep(M)],P.getRuleNames())),{output:"Result: "+ae(M)}}return{output:"",error:"Nothing to apply rule to"}}catch(rt){return{output:"",error:rt.map((function(e){return e.message})).join("\n")}}case"/model2*":try{var K=t[1],q=new Rt(t.slice(2).join(" ")),$=Ge(q.getTree()[0]);if($){var X;for(Ae($=Pe($));X!==(null===(Z=$)||void 0===Z?void 0:Z.hash);){var Z,ee,te=ge.a.cloneDeep($);if(te&&Ye(te).type===W.null)return{output:"Result: the expression is undefined"};X=null===(ee=$)||void 0===ee?void 0:ee.hash;var re=ze($=Ve($=De($=Se($=Oe($)))),K);if("nonpoly"===re.flag)return{output:"",error:"Could not convert to polynomial"};Ae($=Pe($=Fe($=We($=re.node))))}for(X=void 0,Ae($=Pe($));X!==(null===(ne=$)||void 0===ne?void 0:ne.hash);){var ne,ie;X=null===(ie=$)||void 0===ie?void 0:ie.hash,Ae($=Pe($=Ve($=De($=Se($=Oe($))))))}return $&&yr.dispatch(x([ge.a.cloneDeep($)],q.getRuleNames())),{output:"Result: "+ae($)}}return{output:"",error:"Nothing to apply rule to"}}catch(rt){return{output:"",error:rt.map((function(e){return e.message})).join("\n")}}case"/poly":var ce=t.slice(1).join(" "),oe=ge.a.cloneDeep(N(yr.getState()));if(!oe)return{output:"",error:"Nothing to apply rule to"};var ue=ze(oe.tree[0],ce);switch(ue.flag){case"constant":return yr.dispatch(x([ue.node],oe.ruleNames)),{output:"Reduced to constant: "+ae(ue.node)};case"term":return yr.dispatch(x([ue.node],oe.ruleNames)),{output:"Reduced to single term: "+ae(ue.node)};case"poly":return yr.dispatch(x([ue.node],oe.ruleNames)),{output:"Converted to polynomial: "+ae(ue.node)};case"nonpoly":default:return{output:"",error:"Could not convert to polynomial"}}case"/model4":try{var se=new Rt(t.slice(1).join(" "));yr.dispatch(x(se.getTree(),se.getRuleNames()));var le=ge.a.cloneDeep(yr.dispatch(x(se.getTree(),se.getRuleNames())));if(le){var pe=Ge(le.tree[0]);if(pe){for(var he=Ce(Oe(pe)),de=ge.a.cloneDeep(he),fe=0;fe<100;fe++)de&&(de=De(de=Ue(de=Re(de=Ve(de=Se(de=Oe(de)))))));return de=Te(de),yr.dispatch(x([de],le.ruleNames)),{output:"Result: "+ae(de)}}return{output:"",error:"Nothing to apply rule to"}}return{output:"",error:"Nothing to apply rule to"}}catch(rt){return{output:"",error:rt.map((function(e){return e.message})).join("\n")}}case"/smart":var ve=ge.a.cloneDeep(N(yr.getState()));if(ve){var ye=We(ve.tree[0]);return ye&&yr.dispatch(x([ye],ve.ruleNames)),{output:"Result: "+ae(ye)}}return{output:"",error:"Nothing to apply rule to"};case"/hash":var me=ge.a.cloneDeep(N(yr.getState()));if(me){var be=me.tree[0];return Ae(be),be&&yr.dispatch(x([be],me.ruleNames)),{output:"Result: "+ae(be)}}return{output:"",error:"Nothing to apply hashing to"};case"/test":var we=t.slice(1).join(" ");ge.a.cloneDeep(N(yr.getState()));return function(e){[{test:"x*(x^2+x+1)",expected:"x+x^2+x^3"},{test:"4*x^2+x+2*x^2+0",expected:"x+6*x^2"},{test:"(x+2)^3",expected:"8+12*x+6*x^2+x^3"},{test:"x/0",expected:"the expression is undefined"},{test:"1/x^2",expected:"x^(-2)"},{test:"x^2*x^4*1",expected:"x^6"},{test:"(x^2)^2+(5+2)*x",expected:"7*x+x^4"},{test:"4*x^3/x",expected:"4*x^2"},{test:"(x-x)+x^2*(x-2*x)",expected:"-1*x^3"},{test:"(x+1)*(x-1)",expected:"-1+x^2"}].map((function(t,r){var n=Nt("/model".concat(e," ").concat(t.test));if(null===n||void 0===n?void 0:n.error)return{isInput:!1,line:"Test ".concat(r+1,': error ("').concat(n.error,'")'),isError:!0};var i=null===n||void 0===n?void 0:n.output.split("Result: ")[1];return t.expected===i?{isError:!1,isInput:!1,line:"Test ".concat(r+1,': expected "').concat(t.expected,'", and got "').concat(i,'"')}:{isError:!0,isInput:!1,line:"Test ".concat(r+1,': expected "').concat(t.expected,'", but got "').concat(i,'"')}})).forEach((function(e){yr.dispatch(B(e))}))}(we),{output:"Tested model "+we};case"/model3":try{var xe=new Rt(t.slice(1).join(" "));yr.dispatch(x(xe.getTree(),xe.getRuleNames()));var Ee=ge.a.cloneDeep(yr.dispatch(x(xe.getTree(),xe.getRuleNames())));if(Ee){var Ie=Ge(Ee.tree[0]);if(Ie){yr.dispatch(x([Ie],Ee.ruleNames));for(var Le=_e(Ie),He=ge.a.cloneDeep(Le),Me=ge.a.cloneDeep(Le),Be=0;Be<100;Be++){if(Me&&Ye(Me).type===W.null)return{output:"Result: the expression is undefined"};He&&(He=De(He=Ue(He=Re(He=Ve(He=Se(He=Oe(He)))))))}return{output:"Result: "+ae(He=Te(He))}}return{output:"",error:"Nothing to apply rule to"}}return{output:"",error:"Nothing to apply rule to"}}catch(rt){return{output:"",error:rt.map((function(e){return e.message})).join("\n")}}case"/model3*":try{var Qe=new Rt(t.slice(1).join(" ")),Je=Ge(Qe.getTree()[0]);if(Je){var Ke,qe=_e(Je);for(Ae(qe=Pe(qe));Ke!==(null===($e=qe)||void 0===$e?void 0:$e.hash);){var $e,Xe,Ze=ge.a.cloneDeep(qe);if(Ze&&Ye(Ze).type===W.null)return{output:"Result: the expression is undefined"};Ke=null===(Xe=qe)||void 0===Xe?void 0:Xe.hash,Ae(qe=Pe(qe=Fe(qe=We(qe=Ve(qe=De(qe=Se(qe=Oe(qe))))))))}for(Ke=void 0,Ae(qe=Pe(qe));Ke!==(null===(et=qe)||void 0===et?void 0:et.hash);){var et,tt;Ke=null===(tt=qe)||void 0===tt?void 0:tt.hash,Ae(qe=Pe(qe=Ve(qe=De(qe=Se(qe=Oe(qe))))))}return qe&&yr.dispatch(x([ge.a.cloneDeep(qe)],Qe.getRuleNames())),{output:"Result: "+ae(qe)}}return{output:"",error:"Nothing to apply rule to"}}catch(rt){return{output:"",error:rt.map((function(e){return e.message})).join("\n")}}default:return{output:"",error:"Command '".concat(t[0],"' not recognized")}}}var kt=le.a.mark(Ht),_t=le.a.mark(Ut),It=le.a.mark(Dt),Tt=le.a.mark(Pt),At=le.a.mark(Mt),St=le.a.mark(Bt),Ct=le.a.mark(Vt),Lt=le.a.mark(Ft);function Ht(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fe.g)(j.ExecuteInput,Ut);case 2:case"end":return e.stop()}}),kt)}function Ut(e){var t,r,n;return le.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(fe.a)([Object(fe.e)(B({isInput:!0,line:e.input,isError:!1})),Object(fe.e)((a=e.input,{input:a,type:j.AddToInputHistory}))]);case 2:return i.next=4,Object(fe.b)(Nt,e.input);case 4:if(!(t=i.sent)){i.next=14;break}if(r=t.output,!(n=t.error)){i.next=12;break}return i.next=10,Object(fe.a)(n.split("\n").map((function(e){return Object(fe.e)(B({isInput:!1,line:e,isError:!0}))})));case 10:i.next=14;break;case 12:return i.next=14,Object(fe.a)(r.split("\n").map((function(e){return Object(fe.e)(B({isInput:!1,line:e,isError:!1}))})));case 14:return i.next=16,Object(fe.d)(G());case 16:case"end":return i.stop()}var a}),_t)}function Dt(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fe.g)(j.LoadHistory,Pt);case 2:case"end":return e.stop()}}),It)}function Pt(){var e;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(fe.b)(we);case 2:return e=t.sent,t.next=5,Object(fe.e)(F(e));case 5:case"end":return t.stop()}}),Tt)}function Mt(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fe.g)(j.ClearHistory,Bt);case 2:case"end":return e.stop()}}),At)}function Bt(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fe.e)(F({lines:[],inputHistory:[]}));case 2:return e.next=4,Object(fe.d)(G());case 4:case"end":return e.stop()}}),St)}function Vt(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fe.g)(j.SaveHistory,Ft);case 2:case"end":return e.stop()}}),Ct)}function Ft(){var e,t;return le.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(fe.f)(z);case 2:return e=r.sent,r.next=5,Object(fe.f)(Q);case 5:return t=r.sent,r.next=8,Object(fe.b)(be,{lines:e,inputHistory:t});case 8:case"end":return r.stop()}}),Lt)}var Gt=[Ht,Dt,Vt,Mt];function Wt(e){localStorage.setItem("treeCache",JSON.stringify(e))}function zt(){var e=localStorage.getItem("treeCache");return e?JSON.parse(e):{history:[],index:-1}}var Qt=le.a.mark(er),Yt=le.a.mark(tr),Jt=le.a.mark(rr),Kt=le.a.mark(nr),qt=le.a.mark(ir),$t=le.a.mark(ar),Xt=le.a.mark(cr),Zt=le.a.mark(or);function er(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fe.g)(n.UpdateTree,tr);case 2:case"end":return e.stop()}}),Qt)}function tr(e){return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(fe.e)((r=e.tree,{ruleNames:e.ruleNames,tree:r,type:n.AddToHistory}));case 2:return t.next=4,Object(fe.d)(O());case 4:case"end":return t.stop()}var r}),Yt)}function rr(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fe.g)(n.LoadHistory,nr);case 2:case"end":return e.stop()}}),Jt)}function nr(){var e;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(fe.b)(zt);case 2:return e=t.sent,t.next=5,Object(fe.e)(g(e));case 5:case"end":return t.stop()}}),Kt)}function ir(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fe.g)(n.ClearHistory,ar);case 2:case"end":return e.stop()}}),qt)}function ar(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fe.e)(g({history:[],index:-1}));case 2:return e.next=4,Object(fe.d)(O());case 4:case"end":return e.stop()}}),$t)}function cr(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fe.g)(n.SaveHistory,or);case 2:case"end":return e.stop()}}),Xt)}function or(){var e;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(fe.f)((function(e){return e.tree}));case 2:return e=t.sent,t.next=5,Object(fe.b)(Wt,e);case 5:case"end":return t.stop()}}),Zt)}var ur=[er,rr,cr,ir],sr=le.a.mark(dr),lr=[].concat(Object(pe.a)(Gt),Object(pe.a)(ur)),pr={console:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.AddToInputHistory:return Object(ve.a)({},e,{inputHistory:[].concat(Object(pe.a)(e.inputHistory),[t.input])});case j.AddToLog:return Object(ve.a)({},e,{lines:[].concat(Object(pe.a)(e.lines),[t.line])});case j.SetHistory:return Object(ve.a)({},t.history);default:return e}},tree:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.AddToHistory:return{history:[].concat(Object(pe.a)(e.history||[]),[{tree:t.tree,ruleNames:t.ruleNames}]),index:e.history.length};case n.SetHistory:return Object(ve.a)({},t.history);case n.Undo:return Object(ve.a)({},e,{index:e.index-1});case n.Redo:return Object(ve.a)({},e,{index:e.index+1});default:return e}}},hr=Object(he.combineReducers)(pr);function dr(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fe.c)(Pt);case 2:return e.next=4,Object(fe.c)(nr);case 4:return e.next=6,Object(fe.a)(lr.map((function(e){return e()})));case 6:case"end":return e.stop()}}),sr)}var fr=Object(de.a)(),vr=Object(he.createStore)(hr,Object(he.applyMiddleware)(fr));fr.run(dr);var yr=vr,mr=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidCatch",value:function(e,t){console.error(e,e.stack,t.componentStack),yr.dispatch(B({isError:!0,isInput:!1,line:e.message}))}},{key:"render",value:function(){return o.a.createElement(v.a,{store:yr},o.a.createElement(o.a.Fragment,null,o.a.createElement(H,null,o.a.createElement("h3",null,"Test")),o.a.createElement(ue,null),o.a.createElement(te,null)))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.b.add({faArrowRight:a.a,faRedo:a.b,faTrashAlt:a.c,faUndo:a.d}),s.a.render(o.a.createElement(mr,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[231,1,2]]]);
//# sourceMappingURL=main.49e3d056.chunk.js.map