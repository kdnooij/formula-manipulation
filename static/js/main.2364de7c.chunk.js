(this["webpackJsonpformula-manipulation"]=this["webpackJsonpformula-manipulation"]||[]).push([[0],{229:function(e,t,r){e.exports=r(324)},240:function(e,t,r){},251:function(e,t,r){},252:function(e,t,r){},324:function(e,t,r){"use strict";r.r(t);var n,i=r(76),a=r(77),c=r(1),o=r.n(c),u=r(50),s=r.n(u),l=r(9),p=r(15),h=r(13),f=r(10),d=r(14),v=r(35),y=(r(240),r(329)),m=r(330),b=r(331),O=r(328);function j(e,t){return{ruleNames:t,tree:e,type:n.UpdateTree}}function x(e){return{history:e,type:n.SetHistory}}function w(){return{type:n.SaveHistory}}!function(e){e.UpdateTree="Tree/UpdateTree",e.AddToHistory="Tree/AddToHistory",e.Undo="Tree/Undo",e.Redo="Tree/Redo",e.ClearHistory="Tree/ClearHistory",e.LoadHistory="Tree/LoadHistory",e.SetHistory="Tree/SetHistory",e.SaveHistory="Tree/SaveHistory"}(n||(n={}));var E,g=function(e){return e.tree.index>0},R=function(e){return e.tree.index<e.tree.history.length-1},k=function(e){return e.tree.index>=0?e.tree.history[e.tree.index]:void 0},N=r(94),_=r(66),I=r(326),A=r(327),T=r(334),S=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,r=e.id,n=e.icon,i=e.onClickButton,a=Object(N.a)(e,["name","id","icon","onClickButton"]);return c.createElement(I.a,null,c.createElement(A.a,Object.assign({},a,{id:r||"".concat(t.replace(" ",""),"Button"),onClick:i}),c.createElement(_.a,{icon:n}),c.createElement(T.a,{target:r||"".concat(t.replace(" ",""),"Button")},t)))}}]),t}(c.Component),C=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return c.createElement(O.a,{inline:!0,onSubmit:function(e){return e.preventDefault()}},c.createElement(S,{id:"Undo",name:"Undo last action",icon:"undo",color:"primary",className:"mr-sm-2",disabled:!this.props.canUndo,onClickButton:this.props.undo}),c.createElement(S,{id:"Redo",name:"Redo",icon:"redo",color:"primary",className:"mr-sm-2",disabled:!this.props.canRedo,onClickButton:this.props.redo}))}}]),t}(c.Component),L=Object(v.b)((function(e){return{canRedo:R(e),canUndo:g(e)}}),(function(e){return{redo:function(){return e({type:n.Redo})},undo:function(){return e({type:n.Undo})}}}))(C),H=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return c.createElement(y.a,{color:"light",light:!0},c.createElement(m.a,{href:"/"},"Formula Handling - Group 8"),c.createElement(b.a,{navbar:!0},c.createElement(L,null)))}}]),t}(c.Component),U=r(333),P=r(127),D=r.n(P),M=r(332);function B(e){return{line:e,type:E.AddToLog}}function V(){return{type:E.ClearHistory}}function F(e){return{history:e,type:E.SetHistory}}function G(){return{type:E.SaveHistory}}!function(e){e.AddToLog="Console/Log",e.ExecuteInput="Console/ExecuteInput",e.AddToInputHistory="Console/AddToInputHistory",e.ClearHistory="Console/ClearHistory",e.LoadHistory="Console/LoadHistory",e.SetHistory="Console/SetHistory",e.SaveHistory="Console/SaveHistory"}(E||(E={}));var W,z=function(e){return e.console.lines},Q=function(e){return e.console.inputHistory},Y=function(e){return e.console.lines.length>0},J=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,e))).cycle=function(e){if("ArrowUp"===e.key)if(-1===r.state.cycleIndex){var t=r.props.inputHistory.length-1;t>-1&&r.setState({cycleIndex:t,input:r.props.inputHistory[t],tempInput:r.state.input})}else if(0===r.state.cycleIndex){r.props.inputHistory.length;r.setState({cycleIndex:-1,input:r.state.tempInput||""})}else{var n=r.state.cycleIndex-1;r.setState({cycleIndex:n,input:r.props.inputHistory[n]})}else if("ArrowDown"===e.key)if(-1===r.state.cycleIndex){r.props.inputHistory.length>0&&r.setState({cycleIndex:0,input:r.props.inputHistory[0],tempInput:r.state.input})}else if(r.state.cycleIndex===r.props.inputHistory.length-1)r.setState({cycleIndex:-1,input:r.state.tempInput||""});else{var i=r.state.cycleIndex+1;r.setState({cycleIndex:i,input:r.props.inputHistory[i]})}},r.execute=function(){r.props.executeInput(r.state.input),r.setState({input:""})},r.handleInputChange=function(e){r.setState({cycleIndex:-1,input:e.target.value,tempInput:void 0})},r.state={cycleIndex:-1,input:""},r}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return c.createElement(O.a,{inline:!0,onSubmit:function(t){t.preventDefault(),e.execute()}},c.createElement(M.a,{value:this.state.input,onChange:this.handleInputChange,onKeyDown:this.cycle}),c.createElement(A.a,{onClick:this.execute},c.createElement(_.a,{icon:"arrow-right"})))}},{key:"componentDidUpdate",value:function(){var e=D()(".LogView");e.scrollTop(e.prop("scrollHeight"))}},{key:"componentDidMount",value:function(){var e=D()(".LogView");e.scrollTop(e.prop("scrollHeight"))}}]),t}(c.Component),K=Object(v.b)((function(e){return{inputHistory:Q(e)}}),(function(e){return{executeInput:function(t){return e(function(e){return{input:e,type:E.ExecuteInput}}(t))}}}))(J),q=(r(251),function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,r=e.id,n=e.icon,i=e.onClickButton,a=Object(N.a)(e,["name","id","icon","onClickButton"]);return c.createElement(A.a,Object.assign({size:"sm"},a,{id:r||"".concat(t.replace(" ",""),"Button"),onClick:i}),c.createElement(_.a,{icon:n}),c.createElement(T.a,{target:r||"".concat(t.replace(" ",""),"Button")},t))}}]),t}(c.Component)),$=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return c.createElement(q,{id:"Clear",name:"Clear",icon:"trash-alt",color:"danger",disabled:!this.props.canClear,onClickButton:this.props.clear})}}]),t}(c.Component),X=Object(v.b)((function(e){return{canClear:Y(e)}}),(function(e){return{clear:function(){return e(V())}}}))($),Z=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return c.createElement("div",{className:"LogView"},this.props.lines.map((function(e,t){return e.isInput?c.createElement("p",{key:t},c.createElement("code",{className:"input"},"> "+e.line)):e.isError?c.createElement("p",{key:t},c.createElement("code",{className:"error"},e.line)):c.createElement("p",{key:t},c.createElement("code",{className:"output"},e.line))})))}}]),t}(c.Component),ee=Object(v.b)((function(e){return{lines:z(e)}}))(Z),te=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return c.createElement(c.Fragment,null,c.createElement("div",{className:"HeaderWrapper"},c.createElement(U.a,{className:"ConsoleHeader"},c.createElement("p",{className:"h6"},"Console"),c.createElement(X,null))),c.createElement(U.a,{className:"ConsoleView"},c.createElement(ee,null),c.createElement(K,null)))}}]),t}(c.Component),re=r(97),ne=r(93);!function(e){e.null="null",e.expression="expression",e.number="number",e.variable="variable",e.symbol="symbol",e.summation="summation",e.product="product",e.power="power"}(W||(W={}));var ie=function e(t){Object(l.a)(this,e),this.name=void 0,this.name=t};function ae(e){if(!e)return"null";switch(e.type){case W.null:return"";case W.variable:return e.variable;case W.number:return e.value.toString();case W.expression:return e.children?"?("+e.children.map((function(e){return ae(e)})).join(" ")+")":e.name;case W.symbol:return e.symbol;case W.power:return e.children?ce(e.children[0])?ce(e.children[1])?ae(e.children[0])+"^"+ae(e.children[1]):ae(e.children[0])+"^("+ae(e.children[1])+")":ce(e.children[1])?"("+ae(e.children[0])+")^"+ae(e.children[1]):"("+ae(e.children[0])+")^("+ae(e.children[1])+")":e.name;case W.summation:return e.children?e.children.map((function(e){return e.type===W.number&&e.value<0?"("+ae(e)+")":ae(e)})).join(" + "):e.name;case W.product:return e.children?e.children.map((function(e){return e.type===W.summation?"("+ae(e)+")":ae(e)})).join("*"):e.name;default:return""}}function ce(e){return e.type===W.variable||e.type===W.symbol||e.type===W.number&&e.value>=0}r(252);var oe=function(e){function t(){var e,r;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(r=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(i)))).svg=void 0,r.width=1100,r.tree=function(e){var t=Object(ne.b)(e);return t.data.dx=30,t.data.dy=r.width/(t.height+1),re.c().nodeSize([t.data.dx,t.data.dy])(t)},r.chart=function(e){var t=r.tree(e),n=1/0,i=-n;t.each((function(e){e.x>i&&(i=e.x),e.x<n&&(n=e.x)})),r.svg.attr("viewBox",[0,0,r.width,i-n+2*t.data.dx]);var a=r.svg.append("g").attr("font-family","sans-serif").attr("font-size",10).attr("transform","translate(".concat(t.data.dy/3,",").concat(t.data.dx-n,")")),c=(a.append("g").attr("fill","none").attr("stroke","#555").attr("stroke-opacity",.4).attr("stroke-width",1.5).selectAll("path").data(t.links()).join("path").attr("d",re.a().x((function(e){return e.y})).y((function(e){return e.x}))),a.append("g").attr("stroke-linejoin","round").attr("stroke-width",1).selectAll("g").data(t.descendants()).join("g").attr("transform",(function(e){return"translate(".concat(e.y,",").concat(e.x,")")})));c.append("rect").attr("fill",(function(e){return e.children?"#fff":"#eee"})).attr("stroke","#333").attr("x",-25).attr("y",-10).attr("width",50).attr("height",20),c.append("text").style("font-size","1em").attr("dy","0.31em").text((function(e){return e.data.name})).attr("text-anchor","middle").clone(!0).lower().attr("stroke","white")},r}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return c.createElement(c.Fragment,null,c.createElement(U.a,{fluid:!0,className:"TreeView"},c.createElement("svg",{ref:function(t){return e.svg=re.b(t)},width:"100%"}),this.props.tree?c.createElement("span",{className:"StringView"},ae(this.props.tree.tree[0])):null))}},{key:"componentDidUpdate",value:function(){this.props.tree?(this.svg.select("g").remove(),this.chart(this.props.tree.tree[0])):this.svg.select("g").remove()}},{key:"componentDidMount",value:function(){this.props.tree?(this.svg.select("g").remove(),this.chart(this.props.tree.tree[0])):this.svg.select("g").remove()}}]),t}(c.Component),ue=Object(v.b)((function(e){return{tree:k(e)}}))(oe),se=r(17),le=r.n(se),pe=r(38),he=r(43),fe=(r(254),r(172)),de=r(18),ve=r(67);function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(r,!0).forEach((function(t){Object(ve.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var be={inputHistory:[],lines:[]};function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(r,!0).forEach((function(t){Object(ve.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var xe={history:[],index:-1};function we(e){localStorage.setItem("consoleCache",JSON.stringify(e))}function Ee(){var e=localStorage.getItem("consoleCache");return e?JSON.parse(e):{lines:[],inputHistory:[]}}var ge=r(16),Re=r.n(ge);function ke(e){return e.type!==W.summation&&e.type!==W.product||(e.children=e.children.map((function(e){return ke(e)})),e.children=Re.a.flatten(e.children.map((function(t){return t.type===e.type?t.children:[t]})))),e}var Ne=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,W.product))).type=W.product,r.children=void 0,r.children=e,r.name="*",r}return Object(d.a)(t,e),t}(ie),_e=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,W.summation))).type=W.summation,r.children=void 0,r.children=e,r.name="+",r}return Object(d.a)(t,e),t}(ie);function Ie(e){switch(e.type!==W.summation&&e.type!==W.product&&e.type!==W.power||(e.children=e.children.map((function(e){return Ie(e)}))),e.type){case W.product:return function(e){for(var t=e.children,r=function(e){if(t[e].type===W.summation){if(0===e){var r=t[e].children.map((function(r){return new Ne([r,t[e+1]])}));return{v:new _e(r)}}var n=t[e].children.map((function(r){return new Ne([r,t[e-1]])}));return{v:new _e(n)}}},n=0;n<t.length;n++){var i=r(n);if("object"===typeof i)return i.v}return e}(e);default:return e}}var Ae=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,W.variable))).value=void 0,r.type=W.number,r.value=e,r.name=e.toString(),r}return Object(d.a)(t,e),t}(ie);function Te(e){return e.type!==W.summation&&e.type!==W.product&&e.type!==W.power||(e.children=e.children.map((function(e){return Te(e)}))),e.type===W.summation?function(e){return e.children=Re.a.compact(e.children.map((function(e){return e.type===W.number&&0===e.value?void 0:e}))),0===e.children.length?new Ae(0):e}(e):e.type===W.product?function(e){e.children=Re.a.compact(e.children.map((function(e){return e.type===W.number&&1===e.value?void 0:e})));for(var t=e.children,r=0;r<t.length;r++)if(t[r].type===W.number&&0===t[r].value)return new Ae(0);return 0===e.children.length?new Ae(1):e}(e):e.type===W.power?function(e){var t=e.children[0],r=e.children[1];if(t.type===W.number&&r.type===W.number){if(0===r.value)return new Ae(1);if(1===r.value)return t;if(1===t.value||0===t.value)return t}return e}(e):e}var Se=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,W.power))).type=W.power,r.children=void 0,r.children=e,r.name="^",r}return Object(d.a)(t,e),t}(ie);function Ce(e){return e.type!==W.summation&&e.type!==W.product&&e.type!==W.power||(e.children=e.children.map((function(e){return Ce(e)}))),e.type===W.product?function(e){for(var t=e.children,r=function(r){if(t[r-1].type===W.variable&&t[r].type===W.variable&&t[r-1].variable===t[r].variable){var n=Re.a.compact(e.children.map((function(e,t){return t===r-1?new Se([e,new Ae(2)]):t===r?void 0:e})));return{v:new Ne(n)}}if(t[r-1].type===W.variable&&t[r].type===W.power&&t[r-1].variable===t[r].children[0].variable){var i=Re.a.compact(e.children.map((function(e,n){return n===r-1?new Se([e,new _e([new Ae(1),t[r].children[1]])]):n===r?void 0:e})));return{v:new Ne(i)}}if(t[r].type===W.variable&&t[r-1].type===W.power&&t[r].variable===t[r-1].children[0].variable){var a=Re.a.compact(e.children.map((function(e,n){return n===r?new Se([e,new _e([new Ae(1),t[r-1].children[1]])]):n===r-1?void 0:e})));return{v:new Ne(a)}}},n=1;n<t.length;n++){var i=r(n);if("object"===typeof i)return i.v}return e}(e):e.type===W.summation?function(e){for(var t=e.children,r=function(r){if(t[r-1].type===W.variable&&t[r].type===W.variable&&t[r-1].variable===t[r].variable){var n=Re.a.compact(e.children.map((function(e,t){return t===r-1?new Ne([e,new Ae(2)]):t===r?void 0:e})));return{v:new _e(n)}}if(t[r-1].type===W.variable&&t[r].type===W.product&&t[r-1].variable===t[r].children[0].variable){var i=Re.a.compact(e.children.map((function(e,n){return n===r-1?new Ne([e,new _e([new Ae(1),t[r].children[1]])]):n===r?void 0:e})));return{v:new _e(i)}}if(t[r].type===W.variable&&t[r-1].type===W.product&&t[r].variable===t[r-1].children[0].variable){var a=Re.a.compact(e.children.map((function(e,n){return n===r?new Ne([e,new _e([new Ae(1),t[r-1].children[1]])]):n===r-1?void 0:e})));return{v:new _e(a)}}},n=1;n<t.length;n++){var i=r(n);if("object"===typeof i)return i.v}return e}(e):e}function Le(e){return e.type!==W.summation&&e.type!==W.product&&e.type!==W.power||(e.children=e.children.map((function(e){return Le(e)}))),e.type===W.summation?function(e){var t=0,r=!0,n=!1,i=void 0;try{for(var a,c=e.children[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var o=a.value;o.type===W.number&&(t+=o.value)}}catch(u){n=!0,i=u}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}if(e.children=Re.a.compact(e.children.map((function(e){return e.type!==W.number?e:void 0}))),0===e.children.length)return new Ae(t);0!==t&&e.children.push(new Ae(t));return e}(e):e.type===W.product?function(e){var t=1,r=!0,n=!1,i=void 0;try{for(var a,c=e.children[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var o=a.value;o.type===W.number&&(t*=o.value)}}catch(u){n=!0,i=u}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}if(e.children=Re.a.compact(e.children.map((function(e){return e.type!==W.number?e:void 0}))),0===e.children.length)return new Ae(t);1!==t&&e.children.unshift(new Ae(t));return e}(e):e.type===W.power?function(e){if(e.children[0].type===W.number&&e.children[1].type===W.number)return new Ae(Math.pow(e.children[0].value,e.children[1].value));return e}(e):e}function He(e,t){return e.type===W.number&&t.type===W.number?function(e,t){return e.value>t.value?-1:e.value<t.value?1:0}(e,t):e.type===W.variable&&t.type===W.variable?function(e,t){return e.variable.localeCompare(t.variable)}(e,t):e.type===W.number?1:t.type===W.number?-1:e.type===W.variable?1:t.type===W.variable?-1:function(e,t){if(e.type===W.summation&&t.type===W.summation||e.type===W.product&&t.type===W.product)return function(e,t){return He(e.children[0],t.children[0])}(e,t);if(e.type===W.power&&t.type===W.power)return function(e,t){var r=He(e.children[0],t.children[0]);return 0===r?He(e.children[1],t.children[1]):r}(e,t);if(e.type===W.summation)return 1;if(t.type===W.summation)return-1;if(e.type===W.product)return 1;if(t.type===W.product)return-1;throw new Error("Fault in sorting algorithm")}(e,t)}function Ue(e){return e.type===W.power?(e.children=e.children.map((function(e){return Ue(e)})),function(e){var t=e.children;if(t[0].type===W.power){var r=t[0];t[0]=r.children[0],t[1]=new Ne([r.children[1],t[1]])}if(t[0].type===W.product)return new Ne([new Se([t[0].children[0],t[1]]),new Se([t[0].children[1],t[1]])]);return e}(e)):e.type===W.product?(e.children=e.children.map((function(e){return Ue(e)})),function(e){for(var t=e.children,r=function(r){if(t[r-1].type===W.power&&t[r].type===W.power){var n=t[r-1].children,i=t[r].children;if(n[0].type===W.number&&i[0].type===W.number&&n[0].value===i[0].value)return 2===t.length?{v:new Se([n[0],new _e([n[1],i[1]])])}:(e.children=Re.a.compact(e.children.map((function(e,t){return t===r?new Se([n[0],new _e([n[1],i[1]])]):t===r-1?void 0:e}))),{v:e});if(n[0].type===W.variable&&i[0].type===W.variable&&n[0].variable===i[0].variable)return 2===t.length?{v:new Se([n[0],new _e([n[1],i[1]])])}:(e.children=Re.a.compact(e.children.map((function(e,t){return t===r?new Se([n[0],new _e([n[1],i[1]])]):t===r-1?void 0:e}))),{v:e})}},n=1;n<t.length;n++){var i=r(n);if("object"===typeof i)return i.v}return e}(e)):(e.type===W.summation&&(e.children=e.children.map((function(e){return Ue(e)}))),e)}function Pe(e){switch(e.type){case W.null:return;case W.number:case W.variable:return function(e){return e}(e);case W.symbol:return;case W.expression:return function(e){var t=Pe;if(e.children){if(1===e.children.length){var r=e.children[0];if(r.type===W.variable)return Pe(r);if(r.type===W.number)return Pe(r)}if(2===e.children.length){var n=e.children;return e.children=Re.a.compact([t(new Ae(0)),n[0],t(n[1])]),t(e)}if(3===e.children.length){var i=e.children;if(i[0].type===W.symbol)return Pe(i[1]);var a=i[1];if(a.type===W.symbol)switch(a.symbol){case"+":return t(new _e(Re.a.compact([t(i[0]),t(i[2])])));case"-":return t(new _e(Re.a.compact([t(e.children[0]),t(new Ne(Re.a.compact([t(new Ae(-1)),t(e.children[2])])))])));case"*":return Pe(new Ne(Re.a.compact([Pe(i[0]),Pe(i[2])])));case"/":return t(new Ne(Re.a.compact([t(e.children[0]),t(new Se(Re.a.compact([t(e.children[2]),t(new Ae(-1))])))])));case"^":return t(new Se(Re.a.compact([t(e.children[0]),t(e.children[2])])));default:return e}}}e.children&&(e.children=Re.a.compact(e.children.map((function(e){return Pe(e)}))));return e}(e);default:return e}}var De=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(h.a)(this,Object(f.a)(t).call(this,W.null))).type=W.null,e}return Object(d.a)(t,e),t}(ie);function Me(e){return e.type!==W.summation&&e.type!==W.product&&e.type!==W.power||(e.children=e.children.map((function(e){return Me(e)}))),e.type===W.product?function(e){for(var t=0;t<e.children.length;t++)if(e.children[t].type===W.null)return new De;return e}(e):e.type===W.power?function(e){var t=e.children[0],r=e.children[1],n=Le(t),i=Le(r);if(n.type===W.number&&i.type===W.number){if(0===n.value&&i.value<0)return new De;if(n.value<0&&1/i.value%2===0)return new De}for(var a=0;a<e.children.length;a++)if(e.children[a].type===W.null)return new De;return e}(e):e.type===W.summation?function(e){for(var t=0;t<e.children.length;t++)if(e.children[t].type===W.null)return new De;return e}(e):e}var Be,Ve=r(128);!function(e){e[e.ERROR=0]="ERROR",e[e.WARNING=1]="WARNING"}(Be||(Be={}));var Fe=function(){function e(){Object(l.a)(this,e),this.errors=[]}return Object(p.a)(e,[{key:"addError",value:function(e){this.errors.push(e)}},{key:"syntaxError",value:function(e,t,r,n,i,a){t&&t.text&&(")"===t.text?this.errors.push({end:n+t.text.length,level:Be.ERROR,line:r-1,message:"Expecting arguments before symbol )",start:n}):this.errors.push({end:n+t.text.length,level:Be.ERROR,line:r-1,message:i,start:n}))}}]),e}(),Ge=r(21),We=r(65),ze=r(42),Qe=r(75),Ye=r(40),Je=r(33),Ke=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,e)))._interp=new Qe.LexerATNSimulator(t._ATN,Object(Ge.a)(r)),r}return Object(d.a)(t,e),Object(p.a)(t,[{key:"vocabulary",get:function(){return t.VOCABULARY}}]),Object(p.a)(t,[{key:"grammarFileName",get:function(){return"Expression.g4"}},{key:"ruleNames",get:function(){return t.ruleNames}},{key:"serializedATN",get:function(){return t._serializedATN}},{key:"channelNames",get:function(){return t.channelNames}},{key:"modeNames",get:function(){return t.modeNames}}],[{key:"_ATN",get:function(){return t.__ATN||(t.__ATN=(new We.ATNDeserializer).deserialize(Je.toCharArray(t._serializedATN))),t.__ATN}}]),t}(ze.Lexer);Ke.VARIABLE=1,Ke.SCIENTIFIC_NUMBER=2,Ke.LPAREN=3,Ke.RPAREN=4,Ke.PLUS=5,Ke.MINUS=6,Ke.TIMES=7,Ke.DIV=8,Ke.GT=9,Ke.LT=10,Ke.EQ=11,Ke.POINT=12,Ke.POW=13,Ke.WS=14,Ke.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"],Ke.modeNames=["DEFAULT_MODE"],Ke.ruleNames=["VARIABLE","VALID_ID_START","VALID_ID_CHAR","SCIENTIFIC_NUMBER","NUMBER","UNSIGNED_INTEGER","E","SIGN","LPAREN","RPAREN","PLUS","MINUS","TIMES","DIV","GT","LT","EQ","POINT","POW","WS"],Ke._LITERAL_NAMES=[void 0,void 0,void 0,"'('","')'","'+'","'-'","'*'","'/'","'>'","'<'","'='","'.'","'^'"],Ke._SYMBOLIC_NAMES=[void 0,"VARIABLE","SCIENTIFIC_NUMBER","LPAREN","RPAREN","PLUS","MINUS","TIMES","DIV","GT","LT","EQ","POINT","POW","WS"],Ke.VOCABULARY=new Ye.VocabularyImpl(Ke._LITERAL_NAMES,Ke._SYMBOLIC_NAMES,[]),Ke._serializedATN="\x03\uc91d\ucaba\u058d\uafba\u4f53\u0607\uea8b\uc241\x02\x10u\b\x01\x04\x02\t\x02\x04\x03\t\x03\x04\x04\t\x04\x04\x05\t\x05\x04\x06\t\x06\x04\x07\t\x07\x04\b\t\b\x04\t\t\t\x04\n\t\n\x04\v\t\v\x04\f\t\f\x04\r\t\r\x04\x0e\t\x0e\x04\x0f\t\x0f\x04\x10\t\x10\x04\x11\t\x11\x04\x12\t\x12\x04\x13\t\x13\x04\x14\t\x14\x04\x15\t\x15\x03\x02\x03\x02\x07\x02.\n\x02\f\x02\x0e\x021\v\x02\x03\x03\x05\x034\n\x03\x03\x04\x03\x04\x05\x048\n\x04\x03\x05\x03\x05\x03\x05\x05\x05=\n\x05\x03\x05\x03\x05\x05\x05A\n\x05\x03\x06\x06\x06D\n\x06\r\x06\x0e\x06E\x03\x06\x03\x06\x06\x06J\n\x06\r\x06\x0e\x06K\x05\x06N\n\x06\x03\x07\x06\x07Q\n\x07\r\x07\x0e\x07R\x03\b\x03\b\x03\t\x03\t\x03\n\x03\n\x03\v\x03\v\x03\f\x03\f\x03\r\x03\r\x03\x0e\x03\x0e\x03\x0f\x03\x0f\x03\x10\x03\x10\x03\x11\x03\x11\x03\x12\x03\x12\x03\x13\x03\x13\x03\x14\x03\x14\x03\x15\x06\x15p\n\x15\r\x15\x0e\x15q\x03\x15\x03\x15\x02\x02\x02\x16\x03\x02\x03\x05\x02\x02\x07\x02\x02\t\x02\x04\v\x02\x02\r\x02\x02\x0f\x02\x02\x11\x02\x02\x13\x02\x05\x15\x02\x06\x17\x02\x07\x19\x02\b\x1b\x02\t\x1d\x02\n\x1f\x02\v!\x02\f#\x02\r%\x02\x0e'\x02\x0f)\x02\x10\x03\x02\x06\x05\x02C\\aac|\x04\x02GGgg\x04\x02--//\x05\x02\v\f\x0f\x0f\"\"\x02w\x02\x03\x03\x02\x02\x02\x02\t\x03\x02\x02\x02\x02\x13\x03\x02\x02\x02\x02\x15\x03\x02\x02\x02\x02\x17\x03\x02\x02\x02\x02\x19\x03\x02\x02\x02\x02\x1b\x03\x02\x02\x02\x02\x1d\x03\x02\x02\x02\x02\x1f\x03\x02\x02\x02\x02!\x03\x02\x02\x02\x02#\x03\x02\x02\x02\x02%\x03\x02\x02\x02\x02'\x03\x02\x02\x02\x02)\x03\x02\x02\x02\x03+\x03\x02\x02\x02\x053\x03\x02\x02\x02\x077\x03\x02\x02\x02\t9\x03\x02\x02\x02\vC\x03\x02\x02\x02\rP\x03\x02\x02\x02\x0fT\x03\x02\x02\x02\x11V\x03\x02\x02\x02\x13X\x03\x02\x02\x02\x15Z\x03\x02\x02\x02\x17\\\x03\x02\x02\x02\x19^\x03\x02\x02\x02\x1b`\x03\x02\x02\x02\x1db\x03\x02\x02\x02\x1fd\x03\x02\x02\x02!f\x03\x02\x02\x02#h\x03\x02\x02\x02%j\x03\x02\x02\x02'l\x03\x02\x02\x02)o\x03\x02\x02\x02+/\x05\x05\x03\x02,.\x05\x07\x04\x02-,\x03\x02\x02\x02.1\x03\x02\x02\x02/-\x03\x02\x02\x02/0\x03\x02\x02\x020\x04\x03\x02\x02\x021/\x03\x02\x02\x0224\t\x02\x02\x0232\x03\x02\x02\x024\x06\x03\x02\x02\x0258\x05\x05\x03\x0268\x042;\x0275\x03\x02\x02\x0276\x03\x02\x02\x028\b\x03\x02\x02\x029@\x05\v\x06\x02:<\x05\x0f\b\x02;=\x05\x11\t\x02<;\x03\x02\x02\x02<=\x03\x02\x02\x02=>\x03\x02\x02\x02>?\x05\r\x07\x02?A\x03\x02\x02\x02@:\x03\x02\x02\x02@A\x03\x02\x02\x02A\n\x03\x02\x02\x02BD\x042;\x02CB\x03\x02\x02\x02DE\x03\x02\x02\x02EC\x03\x02\x02\x02EF\x03\x02\x02\x02FM\x03\x02\x02\x02GI\x070\x02\x02HJ\x042;\x02IH\x03\x02\x02\x02JK\x03\x02\x02\x02KI\x03\x02\x02\x02KL\x03\x02\x02\x02LN\x03\x02\x02\x02MG\x03\x02\x02\x02MN\x03\x02\x02\x02N\f\x03\x02\x02\x02OQ\x042;\x02PO\x03\x02\x02\x02QR\x03\x02\x02\x02RP\x03\x02\x02\x02RS\x03\x02\x02\x02S\x0e\x03\x02\x02\x02TU\t\x03\x02\x02U\x10\x03\x02\x02\x02VW\t\x04\x02\x02W\x12\x03\x02\x02\x02XY\x07*\x02\x02Y\x14\x03\x02\x02\x02Z[\x07+\x02\x02[\x16\x03\x02\x02\x02\\]\x07-\x02\x02]\x18\x03\x02\x02\x02^_\x07/\x02\x02_\x1a\x03\x02\x02\x02`a\x07,\x02\x02a\x1c\x03\x02\x02\x02bc\x071\x02\x02c\x1e\x03\x02\x02\x02de\x07@\x02\x02e \x03\x02\x02\x02fg\x07>\x02\x02g\"\x03\x02\x02\x02hi\x07?\x02\x02i$\x03\x02\x02\x02jk\x070\x02\x02k&\x03\x02\x02\x02lm\x07`\x02\x02m(\x03\x02\x02\x02np\t\x05\x02\x02on\x03\x02\x02\x02pq\x03\x02\x02\x02qo\x03\x02\x02\x02qr\x03\x02\x02\x02rs\x03\x02\x02\x02st\b\x15\x02\x02t*\x03\x02\x02\x02\r\x02/37<@EKMRq\x03\b\x02\x02",Ke.__ATN=void 0;var qe=r(37),$e=r(56),Xe=r(64),Ze=r(62),et=r(29),tt=r(63),rt=r(31),nt=r(23),it=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,e)))._interp=new tt.ParserATNSimulator(t._ATN,Object(Ge.a)(r)),r}return Object(d.a)(t,e),Object(p.a)(t,[{key:"vocabulary",get:function(){return t.VOCABULARY}},{key:"grammarFileName",get:function(){return"Expression.g4"}},{key:"ruleNames",get:function(){return t.ruleNames}},{key:"serializedATN",get:function(){return t._serializedATN}}]),Object(p.a)(t,[{key:"file",value:function(){var e=new ct(this._ctx,this.state);this.enterRule(e,0,t.RULE_file);try{this.enterOuterAlt(e,1),this.state=12,this.expression(0),this.state=13,this.match(t.EOF)}catch(r){if(!(r instanceof rt.RecognitionException))throw r;e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r)}finally{this.exitRule()}return e}},{key:"expression",value:function(e){void 0===e&&(e=0);var r,n=this._ctx,i=this.state,a=new ot(this._ctx,i);this.enterRecursionRule(a,2,t.RULE_expression,e);try{var c;switch(this.enterOuterAlt(a,1),this.state=24,this._errHandler.sync(this),this._input.LA(1)){case t.LPAREN:this.state=16,this.match(t.LPAREN),this.state=17,this.expression(0),this.state=18,this.match(t.RPAREN);break;case t.PLUS:this.state=20,this.match(t.PLUS);break;case t.MINUS:this.state=21,this.match(t.MINUS),this.state=22,this.atom();break;case t.VARIABLE:case t.SCIENTIFIC_NUMBER:this.state=23,this.atom();break;default:throw new Xe.NoViableAltException(this)}for(this._ctx._stop=this._input.tryLT(-1),this.state=37,this._errHandler.sync(this),c=this.interpreter.adaptivePredict(this._input,2,this._ctx);2!==c&&c!==qe.ATN.INVALID_ALT_NUMBER;){if(1===c)switch(null!=this._parseListeners&&this.triggerExitRuleEvent(),a,this.state=35,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,1,this._ctx)){case 1:if(a=new ot(n,i),this.pushNewRecursionContext(a,2,t.RULE_expression),this.state=26,!this.precpred(this._ctx,7))throw new $e.FailedPredicateException(this,"this.precpred(this._ctx, 7)");this.state=27,this.match(t.POW),this.state=28,this.expression(8);break;case 2:if(a=new ot(n,i),this.pushNewRecursionContext(a,2,t.RULE_expression),this.state=29,!this.precpred(this._ctx,6))throw new $e.FailedPredicateException(this,"this.precpred(this._ctx, 6)");this.state=30,(r=this._input.LA(1))!==t.TIMES&&r!==t.DIV?this._errHandler.recoverInline(this):(this._input.LA(1)===nt.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()),this.state=31,this.expression(7);break;case 3:if(a=new ot(n,i),this.pushNewRecursionContext(a,2,t.RULE_expression),this.state=32,!this.precpred(this._ctx,5))throw new $e.FailedPredicateException(this,"this.precpred(this._ctx, 5)");this.state=33,(r=this._input.LA(1))!==t.PLUS&&r!==t.MINUS?this._errHandler.recoverInline(this):(this._input.LA(1)===nt.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()),this.state=34,this.expression(6)}this.state=39,this._errHandler.sync(this),c=this.interpreter.adaptivePredict(this._input,2,this._ctx)}}catch(o){if(!(o instanceof rt.RecognitionException))throw o;a.exception=o,this._errHandler.reportError(this,o),this._errHandler.recover(this,o)}finally{this.unrollRecursionContexts(n)}return a}},{key:"atom",value:function(){var e=new ut(this._ctx,this.state);this.enterRule(e,4,t.RULE_atom);try{switch(this.state=42,this._errHandler.sync(this),this._input.LA(1)){case t.SCIENTIFIC_NUMBER:this.enterOuterAlt(e,1),this.state=40,this.scientific();break;case t.VARIABLE:this.enterOuterAlt(e,2),this.state=41,this.variable();break;default:throw new Xe.NoViableAltException(this)}}catch(r){if(!(r instanceof rt.RecognitionException))throw r;e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r)}finally{this.exitRule()}return e}},{key:"scientific",value:function(){var e=new st(this._ctx,this.state);this.enterRule(e,6,t.RULE_scientific);try{this.enterOuterAlt(e,1),this.state=44,this.match(t.SCIENTIFIC_NUMBER)}catch(r){if(!(r instanceof rt.RecognitionException))throw r;e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r)}finally{this.exitRule()}return e}},{key:"variable",value:function(){var e=new lt(this._ctx,this.state);this.enterRule(e,8,t.RULE_variable);try{this.enterOuterAlt(e,1),this.state=46,this.match(t.VARIABLE)}catch(r){if(!(r instanceof rt.RecognitionException))throw r;e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r)}finally{this.exitRule()}return e}},{key:"relop",value:function(){var e,r=new pt(this._ctx,this.state);this.enterRule(r,10,t.RULE_relop);try{this.enterOuterAlt(r,1),this.state=48,0!==(-32&(e=this._input.LA(1)))||0===(1<<e&(1<<t.GT|1<<t.LT|1<<t.EQ))?this._errHandler.recoverInline(this):(this._input.LA(1)===nt.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(n){if(!(n instanceof rt.RecognitionException))throw n;r.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n)}finally{this.exitRule()}return r}},{key:"sempred",value:function(e,t,r){switch(t){case 1:return this.expression_sempred(e,r)}return!0}},{key:"expression_sempred",value:function(e,t){switch(t){case 0:return this.precpred(this._ctx,7);case 1:return this.precpred(this._ctx,6);case 2:return this.precpred(this._ctx,5)}return!0}}],[{key:"_ATN",get:function(){return t.__ATN||(t.__ATN=(new We.ATNDeserializer).deserialize(Je.toCharArray(t._serializedATN))),t.__ATN}}]),t}(Ze.Parser);it.VARIABLE=1,it.SCIENTIFIC_NUMBER=2,it.LPAREN=3,it.RPAREN=4,it.PLUS=5,it.MINUS=6,it.TIMES=7,it.DIV=8,it.GT=9,it.LT=10,it.EQ=11,it.POINT=12,it.POW=13,it.WS=14,it.RULE_file=0,it.RULE_expression=1,it.RULE_atom=2,it.RULE_scientific=3,it.RULE_variable=4,it.RULE_relop=5,it.ruleNames=["file","expression","atom","scientific","variable","relop"],it._LITERAL_NAMES=[void 0,void 0,void 0,"'('","')'","'+'","'-'","'*'","'/'","'>'","'<'","'='","'.'","'^'"],it._SYMBOLIC_NAMES=[void 0,"VARIABLE","SCIENTIFIC_NUMBER","LPAREN","RPAREN","PLUS","MINUS","TIMES","DIV","GT","LT","EQ","POINT","POW","WS"],it.VOCABULARY=new Ye.VocabularyImpl(it._LITERAL_NAMES,it._SYMBOLIC_NAMES,[]),it._serializedATN="\x03\uc91d\ucaba\u058d\uafba\u4f53\u0607\uea8b\uc241\x03\x105\x04\x02\t\x02\x04\x03\t\x03\x04\x04\t\x04\x04\x05\t\x05\x04\x06\t\x06\x04\x07\t\x07\x03\x02\x03\x02\x03\x02\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x05\x03\x1b\n\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x07\x03&\n\x03\f\x03\x0e\x03)\v\x03\x03\x04\x03\x04\x05\x04-\n\x04\x03\x05\x03\x05\x03\x06\x03\x06\x03\x07\x03\x07\x03\x07\x02\x02\x03\x04\b\x02\x02\x04\x02\x06\x02\b\x02\n\x02\f\x02\x02\x05\x03\x02\t\n\x03\x02\x07\b\x03\x02\v\r\x025\x02\x0e\x03\x02\x02\x02\x04\x1a\x03\x02\x02\x02\x06,\x03\x02\x02\x02\b.\x03\x02\x02\x02\n0\x03\x02\x02\x02\f2\x03\x02\x02\x02\x0e\x0f\x05\x04\x03\x02\x0f\x10\x07\x02\x02\x03\x10\x03\x03\x02\x02\x02\x11\x12\b\x03\x01\x02\x12\x13\x07\x05\x02\x02\x13\x14\x05\x04\x03\x02\x14\x15\x07\x06\x02\x02\x15\x1b\x03\x02\x02\x02\x16\x1b\x07\x07\x02\x02\x17\x18\x07\b\x02\x02\x18\x1b\x05\x06\x04\x02\x19\x1b\x05\x06\x04\x02\x1a\x11\x03\x02\x02\x02\x1a\x16\x03\x02\x02\x02\x1a\x17\x03\x02\x02\x02\x1a\x19\x03\x02\x02\x02\x1b'\x03\x02\x02\x02\x1c\x1d\f\t\x02\x02\x1d\x1e\x07\x0f\x02\x02\x1e&\x05\x04\x03\n\x1f \f\b\x02\x02 !\t\x02\x02\x02!&\x05\x04\x03\t\"#\f\x07\x02\x02#$\t\x03\x02\x02$&\x05\x04\x03\b%\x1c\x03\x02\x02\x02%\x1f\x03\x02\x02\x02%\"\x03\x02\x02\x02&)\x03\x02\x02\x02'%\x03\x02\x02\x02'(\x03\x02\x02\x02(\x05\x03\x02\x02\x02)'\x03\x02\x02\x02*-\x05\b\x05\x02+-\x05\n\x06\x02,*\x03\x02\x02\x02,+\x03\x02\x02\x02-\x07\x03\x02\x02\x02./\x07\x04\x02\x02/\t\x03\x02\x02\x0201\x07\x03\x02\x021\v\x03\x02\x02\x0223\t\x04\x02\x023\r\x03\x02\x02\x02\x06\x1a%',",it.__ATN=void 0;var at,ct=function(e){function t(e,r){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).call(this,e,r))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"expression",value:function(){return this.getRuleContext(0,ot)}},{key:"EOF",value:function(){return this.getToken(it.EOF,0)}}]),Object(p.a)(t,[{key:"enterRule",value:function(e){e.enterFile&&e.enterFile(this)}},{key:"exitRule",value:function(e){e.exitFile&&e.exitFile(this)}},{key:"accept",value:function(e){return e.visitFile?e.visitFile(this):e.visitChildren(this)}},{key:"ruleIndex",get:function(){return it.RULE_file}}]),t}(et.ParserRuleContext),ot=function(e){function t(e,r){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).call(this,e,r))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"expression",value:function(e){return void 0===e?this.getRuleContexts(t):this.getRuleContext(e,t)}},{key:"POW",value:function(){return this.tryGetToken(it.POW,0)}},{key:"TIMES",value:function(){return this.tryGetToken(it.TIMES,0)}},{key:"DIV",value:function(){return this.tryGetToken(it.DIV,0)}},{key:"PLUS",value:function(){return this.tryGetToken(it.PLUS,0)}},{key:"MINUS",value:function(){return this.tryGetToken(it.MINUS,0)}},{key:"LPAREN",value:function(){return this.tryGetToken(it.LPAREN,0)}},{key:"RPAREN",value:function(){return this.tryGetToken(it.RPAREN,0)}},{key:"atom",value:function(){return this.tryGetRuleContext(0,ut)}}]),Object(p.a)(t,[{key:"enterRule",value:function(e){e.enterExpression&&e.enterExpression(this)}},{key:"exitRule",value:function(e){e.exitExpression&&e.exitExpression(this)}},{key:"accept",value:function(e){return e.visitExpression?e.visitExpression(this):e.visitChildren(this)}},{key:"ruleIndex",get:function(){return it.RULE_expression}}]),t}(et.ParserRuleContext),ut=function(e){function t(e,r){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).call(this,e,r))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"scientific",value:function(){return this.tryGetRuleContext(0,st)}},{key:"variable",value:function(){return this.tryGetRuleContext(0,lt)}}]),Object(p.a)(t,[{key:"enterRule",value:function(e){e.enterAtom&&e.enterAtom(this)}},{key:"exitRule",value:function(e){e.exitAtom&&e.exitAtom(this)}},{key:"accept",value:function(e){return e.visitAtom?e.visitAtom(this):e.visitChildren(this)}},{key:"ruleIndex",get:function(){return it.RULE_atom}}]),t}(et.ParserRuleContext),st=function(e){function t(e,r){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).call(this,e,r))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"SCIENTIFIC_NUMBER",value:function(){return this.getToken(it.SCIENTIFIC_NUMBER,0)}}]),Object(p.a)(t,[{key:"enterRule",value:function(e){e.enterScientific&&e.enterScientific(this)}},{key:"exitRule",value:function(e){e.exitScientific&&e.exitScientific(this)}},{key:"accept",value:function(e){return e.visitScientific?e.visitScientific(this):e.visitChildren(this)}},{key:"ruleIndex",get:function(){return it.RULE_scientific}}]),t}(et.ParserRuleContext),lt=function(e){function t(e,r){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).call(this,e,r))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"VARIABLE",value:function(){return this.getToken(it.VARIABLE,0)}}]),Object(p.a)(t,[{key:"enterRule",value:function(e){e.enterVariable&&e.enterVariable(this)}},{key:"exitRule",value:function(e){e.exitVariable&&e.exitVariable(this)}},{key:"accept",value:function(e){return e.visitVariable?e.visitVariable(this):e.visitChildren(this)}},{key:"ruleIndex",get:function(){return it.RULE_variable}}]),t}(et.ParserRuleContext),pt=function(e){function t(e,r){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).call(this,e,r))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"EQ",value:function(){return this.tryGetToken(it.EQ,0)}},{key:"GT",value:function(){return this.tryGetToken(it.GT,0)}},{key:"LT",value:function(){return this.tryGetToken(it.LT,0)}}]),Object(p.a)(t,[{key:"enterRule",value:function(e){e.enterRelop&&e.enterRelop(this)}},{key:"exitRule",value:function(e){e.exitRelop&&e.exitRelop(this)}},{key:"accept",value:function(e){return e.visitRelop?e.visitRelop(this):e.visitChildren(this)}},{key:"ruleIndex",get:function(){return it.RULE_relop}}]),t}(et.ParserRuleContext),ht=r(79),ft=r(171);!function(e){e.id="id",e.plus="+",e.minus="-",e.mul="*",e.div="/",e.pow="^"}(at||(at={}));var dt=function(e){function t(e,r){var n;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(f.a)(t).call(this,W.expression))).operator=void 0,n.type=W.expression,n.children=void 0,n.children=r,n.operator=e,n}return Object(d.a)(t,e),t}(ie),vt=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,W.symbol))).symbol=void 0,r.type=W.symbol,r.symbol=e,r.name=e,r}return Object(d.a)(t,e),t}(ie),yt=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,W.variable))).variable=void 0,r.type=W.variable,r.variable=e,r.name=e,r}return Object(d.a)(t,e),t}(ie),mt=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"defaultResult",value:function(){return[]}},{key:"aggregateResult",value:function(e,t){return[].concat(Object(pe.a)(e),Object(pe.a)(t))}},{key:"visitVariable",value:function(e){return[new yt(e.text)]}},{key:"visitScientific",value:function(e){return[new Ae(parseFloat(e.text))]}},{key:"visitAtom",value:function(e){return Object(ht.a)(Object(f.a)(t.prototype),"visitChildren",this).call(this,e)}},{key:"visitExpression",value:function(e){var r=Object(ht.a)(Object(f.a)(t.prototype),"visitChildren",this).call(this,e);return[new dt(at.id,r)]}},{key:"visitFile",value:function(e){return Object(ht.a)(Object(f.a)(t.prototype),"visitChildren",this).call(this,e)}},{key:"visitRelop",value:function(e){return Object(ht.a)(Object(f.a)(t.prototype),"visitChildren",this).call(this,e)}},{key:"visitTerminal",value:function(e){return e.symbol.text?[new vt(e.symbol.text)]:[]}}]),t}(ft.AbstractParseTreeVisitor),bt=function(){function e(t){Object(l.a)(this,e),this._tree=void 0,this._parser=void 0,this._lexer=void 0,this._errorListener=void 0,this._errorListener=new Fe;var r=new Ve.ANTLRInputStream(t);this._lexer=new Ke(r);var n=new Ve.CommonTokenStream(this._lexer);if(this._parser=new it(n),this._parser.addErrorListener(this._errorListener),this._tree=this._parser.file(),this._errorListener.errors.length>0)throw this._errorListener.errors}return Object(p.a)(e,[{key:"toString",value:function(){return this._tree.toStringTree(this._parser.ruleNames)}},{key:"getTree",value:function(){return(new mt).visit(this._tree)}},{key:"getRuleNames",value:function(){return this._parser.ruleNames}}]),e}();function Ot(e){var t=e.split(" ");switch(t[0]){case"/clear":return sr.dispatch(V()),void sr.dispatch({type:n.ClearHistory});case"/parse":try{var r=new bt(t.slice(1).join(" "));return sr.dispatch(j(r.getTree(),r.getRuleNames())),{output:"parsed: "+r.toString()}}catch(S){return{output:"",error:S.map((function(e){return e.message})).join("\n")}}case"/p":try{var i=new bt(t.slice(1).join(" ")),a=Pe(i.getTree()[0]);return a&&sr.dispatch(j([a],i.getRuleNames())),{output:"parsed: "+i.toString()}}catch(S){return{output:"",error:S.map((function(e){return e.message})).join("\n")}}case"/simplify":var c=Re.a.cloneDeep(k(sr.getState()));if(c){var o=Pe(c.tree[0]);return o&&sr.dispatch(j([o],c.ruleNames)),{output:"Simplified to: "+ae(o)}}return{output:"",error:"Nothing to simplify"};case"/associative":var u=Re.a.cloneDeep(k(sr.getState()));if(u){var s=ke(u.tree[0]);return s&&sr.dispatch(j([s],u.ruleNames)),{output:"Result: "+ae(s)}}return{output:"",error:"Nothing to apply rule to"};case"/identity":var l=Re.a.cloneDeep(k(sr.getState()));if(l){var p=Te(l.tree[0]);return p&&sr.dispatch(j([p],l.ruleNames)),{output:"Result: "+ae(p)}}return{output:"",error:"Nothing to apply rule to"};case"/power":var h=Re.a.cloneDeep(k(sr.getState()));if(h){var f=Ue(h.tree[0]);return f&&sr.dispatch(j([f],h.ruleNames)),{output:"Result: "+ae(f)}}return{output:"",error:"Nothing to apply rule to"};case"/brackets":var d=Re.a.cloneDeep(k(sr.getState()));if(d){var v=Ie(d.tree[0]);return v&&sr.dispatch(j([v],d.ruleNames)),{output:"Result: "+ae(v)}}return{output:"",error:"Nothing to apply rule to"};case"/defined":var y=Re.a.cloneDeep(k(sr.getState())),m=Re.a.cloneDeep(k(sr.getState()));return y&&m?Me(m.tree[0]).type===W.null?{output:"Result: the expression is undefined"}:{output:"Result: "+ae(y.tree[0])}:{output:"",error:"Nothing to apply rule to"};case"/numerical":var b=Re.a.cloneDeep(k(sr.getState()));if(b){var O=Le(b.tree[0]);return O&&sr.dispatch(j([O],b.ruleNames)),{output:"Result: "+ae(O)}}return{output:"",error:"Nothing to apply rule to"};case"/order":var x=Re.a.cloneDeep(k(sr.getState()));if(x){var w=function e(t){return t.type!==W.summation&&t.type!==W.product&&t.type!==W.power||(t.children=t.children.map((function(t){return e(t)})),t.children=t.children.sort((function(e,t){return He(e,t)}))),t}(x.tree[0]);return w&&sr.dispatch(j([w],x.ruleNames)),{output:"Result: "+ae(w)}}return{output:"",error:"Nothing to apply rule to"};case"/likeTerms":var E=Re.a.cloneDeep(k(sr.getState()));if(E){var g=Ce(E.tree[0]);return g&&sr.dispatch(j([g],E.ruleNames)),{output:"Result: "+ae(g)}}return{output:"",error:"Nothing to apply rule to"};case"/model1":try{var R=new bt(t.slice(1).join(" "));sr.dispatch(j(R.getTree(),R.getRuleNames()));var N=Re.a.cloneDeep(sr.dispatch(j(R.getTree(),R.getRuleNames())));if(N){var _=Pe(N.tree[0]);_&&sr.dispatch(j([_],N.ruleNames));for(var I=Re.a.cloneDeep(_),A=Re.a.cloneDeep(_),T=0;T<100;T++){if(A&&Me(A).type===W.null)return{output:"Result: the expression is undefined"};I&&(I=Le(I=Ce(I=Ie(I=Ue(I=Te(I=ke(I)))))))}return{output:"Result: "+ae(I)}}return{output:"",error:"Nothing to apply rule to"}}catch(S){return{output:"",error:S.map((function(e){return e.message})).join("\n")}}default:return{output:"",error:"Command '".concat(t[0],"' not recognized")}}}var jt=le.a.mark(_t),xt=le.a.mark(It),wt=le.a.mark(At),Et=le.a.mark(Tt),gt=le.a.mark(St),Rt=le.a.mark(Ct),kt=le.a.mark(Lt),Nt=le.a.mark(Ht);function _t(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.g)(E.ExecuteInput,It);case 2:case"end":return e.stop()}}),jt)}function It(e){var t,r,n;return le.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(de.a)([Object(de.e)(B({isInput:!0,line:e.input,isError:!1})),Object(de.e)((a=e.input,{input:a,type:E.AddToInputHistory}))]);case 2:return i.next=4,Object(de.b)(Ot,e.input);case 4:if(!(t=i.sent)){i.next=14;break}if(r=t.output,!(n=t.error)){i.next=12;break}return i.next=10,Object(de.a)(n.split("\n").map((function(e){return Object(de.e)(B({isInput:!1,line:e,isError:!0}))})));case 10:i.next=14;break;case 12:return i.next=14,Object(de.a)(r.split("\n").map((function(e){return Object(de.e)(B({isInput:!1,line:e,isError:!1}))})));case 14:return i.next=16,Object(de.d)(G());case 16:case"end":return i.stop()}var a}),xt)}function At(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.g)(E.LoadHistory,Tt);case 2:case"end":return e.stop()}}),wt)}function Tt(){var e;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(de.b)(Ee);case 2:return e=t.sent,t.next=5,Object(de.e)(F(e));case 5:case"end":return t.stop()}}),Et)}function St(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.g)(E.ClearHistory,Ct);case 2:case"end":return e.stop()}}),gt)}function Ct(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.e)(F({lines:[],inputHistory:[]}));case 2:return e.next=4,Object(de.d)(G());case 4:case"end":return e.stop()}}),Rt)}function Lt(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.g)(E.SaveHistory,Ht);case 2:case"end":return e.stop()}}),kt)}function Ht(){var e,t;return le.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(de.f)(z);case 2:return e=r.sent,r.next=5,Object(de.f)(Q);case 5:return t=r.sent,r.next=8,Object(de.b)(we,{lines:e,inputHistory:t});case 8:case"end":return r.stop()}}),Nt)}var Ut=[_t,At,Lt,St];function Pt(e){localStorage.setItem("treeCache",JSON.stringify(e))}function Dt(){var e=localStorage.getItem("treeCache");return e?JSON.parse(e):{history:[],index:-1}}var Mt=le.a.mark(Yt),Bt=le.a.mark(Jt),Vt=le.a.mark(Kt),Ft=le.a.mark(qt),Gt=le.a.mark($t),Wt=le.a.mark(Xt),zt=le.a.mark(Zt),Qt=le.a.mark(er);function Yt(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.g)(n.UpdateTree,Jt);case 2:case"end":return e.stop()}}),Mt)}function Jt(e){return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(de.e)((r=e.tree,{ruleNames:e.ruleNames,tree:r,type:n.AddToHistory}));case 2:return t.next=4,Object(de.d)(w());case 4:case"end":return t.stop()}var r}),Bt)}function Kt(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.g)(n.LoadHistory,qt);case 2:case"end":return e.stop()}}),Vt)}function qt(){var e;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(de.b)(Dt);case 2:return e=t.sent,t.next=5,Object(de.e)(x(e));case 5:case"end":return t.stop()}}),Ft)}function $t(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.g)(n.ClearHistory,Xt);case 2:case"end":return e.stop()}}),Gt)}function Xt(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.e)(x({history:[],index:-1}));case 2:return e.next=4,Object(de.d)(w());case 4:case"end":return e.stop()}}),Wt)}function Zt(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.g)(n.SaveHistory,er);case 2:case"end":return e.stop()}}),zt)}function er(){var e;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(de.f)((function(e){return e.tree}));case 2:return e=t.sent,t.next=5,Object(de.b)(Pt,e);case 5:case"end":return t.stop()}}),Qt)}var tr=[Yt,Kt,Zt,$t],rr=le.a.mark(cr),nr=[].concat(Object(pe.a)(Ut),Object(pe.a)(tr)),ir={console:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.AddToInputHistory:return me({},e,{inputHistory:[].concat(Object(pe.a)(e.inputHistory),[t.input])});case E.AddToLog:return me({},e,{lines:[].concat(Object(pe.a)(e.lines),[t.line])});case E.SetHistory:return me({},t.history);default:return e}},tree:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.AddToHistory:return{history:[].concat(Object(pe.a)(e.history||[]),[{tree:t.tree,ruleNames:t.ruleNames}]),index:e.history.length};case n.SetHistory:return je({},t.history);case n.Undo:return je({},e,{index:e.index-1});case n.Redo:return je({},e,{index:e.index+1});default:return e}}},ar=Object(he.combineReducers)(ir);function cr(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(de.c)(Tt);case 2:return e.next=4,Object(de.c)(qt);case 4:return e.next=6,Object(de.a)(nr.map((function(e){return e()})));case 6:case"end":return e.stop()}}),rr)}var or=Object(fe.a)(),ur=Object(he.createStore)(ar,Object(he.applyMiddleware)(or));or.run(cr);var sr=ur,lr=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidCatch",value:function(e,t){console.error(e,e.stack,t.componentStack),sr.dispatch(B({isError:!0,isInput:!1,line:e.message}))}},{key:"render",value:function(){return o.a.createElement(v.a,{store:sr},o.a.createElement(o.a.Fragment,null,o.a.createElement(H,null,o.a.createElement("h3",null,"Test")),o.a.createElement(ue,null),o.a.createElement(te,null)))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.b.add({faArrowRight:a.a,faRedo:a.b,faTrashAlt:a.c,faUndo:a.d}),s.a.render(o.a.createElement(lr,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[229,1,2]]]);
//# sourceMappingURL=main.2364de7c.chunk.js.map